/*
        Easybox v1.3 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(a){a("a.lightbox").easybox({/* custom options here */},null,function(a){return this==a||-1!=this.className.indexOf("lightbox")&&this.hasAttribute("data-group")&&this.getAttribute("data-group")==a.getAttribute("data-group")},function(b){var c={};if(a("#easyOptions").length){var f=a.parseJSON(a("#easyOptions").html()),d=b.getAttribute("data-group");a.each(f,function(e,b){if("global"==e||"string"==typeof d&&e==d)c=
a.extend(c,b)})}return c})});
(function(a){function Q(c){c?a("object:visible").add("embed").each(function(a,c){E[a]=[c,c.style.visibility];c.style.visibility="hidden"}):(a.each(E,function(a,c){c[0].style.visibility=c[1]}),E=[]);c=c?"bind":"unbind";a(document)[c]("keydown",Y);if(a.fn.mousewheel)a(window)[c]("mousewheel",Z);a(g)[c]("mousedown",$)[c]("mousemove",R)[c]("mouseup",F);a(window)[c]("mousemove",R)[c]("mouseup",F)}function Y(c){var c=c.keyCode,d=a.inArray;return u?!0:0<=d(c,b.closeKeys)?z():0<=d(c,b.nextKeys)&&!b.noNavigation?
v():0<=d(c,b.previousKeys)&&!b.noNavigation?w():!b.preventOtherKeys}function Z(a,d){return u?!0:0<d&&!b.noNavigation?w():0>d&&!b.noNavigation?v():!b.preventOtherKeys}function w(){n=!0;return G(i)}function v(){n=!1;return G(f)}function S(){if(b.slideshow&&!o&&null==k){if(n&&0<=i)return k=setTimeout(w,b.slideshow),!1;if(!n&&0<=f)return k=setTimeout(v,b.slideshow),!1}b.autoClose&&null==x&&(x=setTimeout(T,b.autoClose));return!1}function G(c){0<=c&&c<e.length&&(j=c,i=(j||(b.loop?e.length:0))-1,f=(j+1)%
e.length||(b.loop?0:-1),H(),b.busyTimeout&&(A=setTimeout(aa,b.busyTimeout)),b.preloadNext&&(0<=i&&I(i),0<=f&&I(f)),e[j].loaded||a(J).show(),I(j));return!1}function ba(){var c=e[j];a(J).hide();if(c.error)a(h).addClass("error").width(b.errorSize[0]).height(b.errorSize[1]);else{if(c.handler.existingDom)p=c.obj,K=a(p).parent(),L=a(p).css("display");c.caption.length&&a(q).html(c.caption).css({display:""});a(h).width(c.width).height(c.height)}1<e.length&&b.counterText.length&&a(r).html(b.counterText.replace(/{x}/,
j+1).replace(/{y}/,e.length)).css({display:""});a(h).css({visibility:"hidden",display:""});U([h.offsetWidth,h.offsetHeight],-1,b.resizeDuration);a(g).queue(function(d){a(h).css({visibility:"",display:"none"});null!=c.obj&&a(c.obj).css({display:"block"}).appendTo(h);a(h).fadeIn(b.fadeDuration,ca);S();d()})}function U(c,b,m){l=c.slice();var e={};if(g.offsetHeight!=c[1]||g.offsetWidth!=c[0])e={height:c[1],marginTop:-c[1]/2,width:c[0],marginLeft:-c[0]/2};if(-1<b)e.opacity=b;a(g).animate(e,m)}function ca(){u=
!1;if(!b.hideBottom){if((0<=i||0<=f)&&!b.noNavigation&&!b.hideButtons)a(M).css({display:""}),a([q,r]).addClass("nav"),0>i&&a(s).addClass("disabled"),0>f&&a(t).addClass("disabled");a(y).fadeIn(b.captionFadeDuration);a(g).animate({height:l[1]+y.offsetHeight},b.captionFadeDuration,b.resizeEasing)}}function H(){u=!0;null!=k&&(clearTimeout(k),k=null);null!=A&&(clearTimeout(A),A=null);null!=x&&(clearTimeout(x),x=null);null!=p&&(a(K).append(a(p).css({display:L})),p=K=L=null);a(h).empty().removeClass();a([g,
y,h,s,t]).stop(!0);a(g).css({width:l[0],height:l[1],marginLeft:-l[0]/2,marginTop:-l[1]/2,opacity:""});a([M,q,r,h,y]).css({display:"none",opacity:""});a([q,r,s,t]).removeClass();a([q,r]).html("").css({display:b.hideCaption?"none":""})}function da(){o=!o;n=!1;a(N).toggleClass("disabled",o);o?null!=k&&(clearTimeout(k),k=null):S();return!1}function z(c){if(!(b.noClose&&1!=c))return 0<=j&&(H(),j=i=f=-1,a(O).stop().fadeOut(b.fadeDuration,Q),U(b.initCenterSize,0,b.fadeDuration),a(g).queue(function(c){F();
a(g).css({left:"",top:""}).hide();c()})),!1}function T(){z(1)}function aa(){u=!1}function I(a){var b=e[a];b.loaded&&P(a);if(!b.loading){b.loading=!0;for(var m=B.length-1;0<=m;--m)if(B[m].identify(b)){b.handler=B[m];b.handler.preLoad(b,function(){P(a)});return}b.error=!0;P(a)}}function P(a){var d=e[a];if(!d.loaded&&(d.loaded=!0,!d.error)){if(!d.width||!d.height)d.width=b.defaultContentSize[0],d.height=b.defaultContentSize[1];if(d.height>b.maximumContentSize[1])d.width=Math.round(b.maximumContentSize[1]*
d.width/d.height),d.height=b.maximumContentSize[1];if(d.width>b.maximumContentSize[0])d.height=Math.round(b.maximumContentSize[0]/d.width*d.height),d.width=b.maximumContentSize[0];d.handler.postLoad(d)}a==j&&ba()}function $(c){return b.dragDrop?(C=!0,a([g,s,t]).css({cursor:"pointer"}),V=c.pageX-a(this).position().left,W=c.pageY-a(this).position().top,!1):!0}function R(c){if(b.dragDrop&&C){var d=c.pageX-a(window).scrollLeft()-V,c=c.pageY-a(window).scrollTop()-W;a(g).css({left:d+"px",top:c+"px"});return!1}return!0}
function F(){return C?(C=!1,a([g,s,t]).css({cursor:""}),!1):!0}var D,B=[],b,e,j=-1,i,f,l,E=[],n=!1,o=!1,C=!1,V=0,W=0,u=!1,p=null,K=null,L=null,A=null,k=null,x=null,O,g,h,M,s,t,N,X,y,q,r,J;a(function(){D={loop:!1,preloadNext:!0,dragDrop:!0,hideBottom:!1,hideCaption:!1,hideButtons:!1,noNavigation:!1,noClose:!1,overlayOpacity:0.8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initCenterSize:[250,250],errorSize:[320,180],defaultContentSize:[960,720],maximumContentSize:[1280,720],ytPlayerHeight:480,
ytPlayerTheme:"light,white",captionFadeDuration:200,slideshow:0,autoClose:0,busyTimeout:800,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],preventOtherKeys:!0};a("body").append(a([O=a('<div id="easyOverlay" />').click(z)[0],g=a('<div id="easyCenter" />').append([h=a('<div id="easyContainer" />')[0],J=a('<div id="easyLoadingIndicator" />')[0],y=a('<div id="easyBottom" />').append([M=a('<div id="easyNavigation" />').append([s=a('<a id="easyPrevLink" href="#" />').click(w)[0],
t=a('<a id="easyNextLink" href="#" />').click(v)[0]])[0],X=a('<a id="easyCloseLink" href="#" />').click(z)[0],N=a('<a id="easySlideLink" href="#" />').click(da)[0],q=a('<div id="easyCaption" />')[0],r=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"))});a.fn.easybox=function(b,d,e,g){var d=d||function(a){var b={url:a.href,caption:a.title};if(a.hasAttribute("data-width"))b.width=a.getAttribute("data-width");if(a.hasAttribute("data-height"))b.height=
a.getAttribute("data-height");return b},e=e||function(a){return this==a},g=g||function(){return{}},j=this;return j.unbind("click").click(function(){var h=this,k=0,i,f=0,l;i=a.grep(j,function(a,b){return e.call(h,a,b)});for(l=i.length;f<l;++f)i[f]==h&&(k=f),i[f]=d(i[f],f);return a.easybox(i,k,a.extend({},b,g(h)))})};a.easybox=function(c,d,f){if(0<=j)return!1;b=a.extend({},D,f);var f=0,h;e=[];for(h=c.length;f<h;++f)e.push(a.extend({caption:"",width:0,height:0},c[f],{handler:null,loaded:!1,loading:!1,
error:!1,obj:null}));d=Math.min(e.length-1,d||0);b.loop=b.loop&&1<e.length;b.slideshow=b.slideshow&&1<e.length?b.slideshow:0;a(N).css({display:b.slideshow&&1<e.length&&!b.hideButtons?"":"none"});n=o=!1;a(X).css({display:!b.hideButtons?"":"none"});l=b.initCenterSize.slice();Q(1);H();a(g).show();a(O).css("opacity",b.overlayOpacity).fadeIn(b.fadeDuration,function(){G(d)});return!1};a.easybox.previous=w;a.easybox.next=v;a.easybox.close=T;a.easybox.isOpen=function(){return 0<=j};a.easybox.defaults=function(b){D=
a.extend(D,b)};a.easybox.resourceHandler=function(b){B.push(a.extend({identify:function(){return!1},preLoad:function(a,b){b()},postLoad:function(){},existingDom:!1},b))};a.easing.easybox=function(a){return 0.7>a?1.2*Math.pow(a/0.7,2):1.2-0.2*Math.sqrt((a-0.7)/(1-0.7))}})(jQuery);
(function(d){d(function(){d.easybox.resourceHandler({identify:function(){return!0},preLoad:function(a,c){c()},postLoad:function(a){a.obj=d('<iframe width="'+a.width+'" height="'+a.height+'" src="'+a.url+'" frameborder="0"></iframe>')[0]},existingDom:!1});d.easybox.resourceHandler({identify:function(a){return a.html?!0:!1},preLoad:function(a,c){c()},postLoad:function(a){a.obj=d('<div style="width:'+a.width+"px;height:"+a.height+'px">'+a.html+"</div>")[0]},existingDom:!1});d.easybox.resourceHandler({identify:function(a){if(!a.url)return!1;
var c=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(a.url);return null!=c&&d("#"+c[2]).length?(a.id=c[2],!0):!1},preLoad:function(a,c){var b=d("#"+a.id)[0];b?(a.width=a.width||d(b).width(),a.height=a.height||d(b).height(),a.obj=b):a.error=!0;c()},postLoad:function(){},existingDom:!0});d.easybox.resourceHandler({identify:function(a){return!a.url?!1:/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(a.url)},preLoad:function(a,c){var b=new Image;b.onload=function(){a.width=a.width||this.width;a.height=a.height||this.height;c()};
b.onerror=function(){a.error=!0;c()};b.src=a.url},postLoad:function(a){a.obj=d('<img src="'+a.url+'" width="'+a.width+'" height="'+a.height+'" alt="'+a.caption+'" />')[0]},existingDom:!0});d.easybox.resourceHandler({height:720,identify:function(a){if(!a.url)return!1;var c=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(a.url);return null!=c?(a.id=c[1],!0):!1},preLoad:function(a,c){d.ajax("http://gdata.youtube.com/feeds/api/videos/"+a.id+"?v=2&alt=jsonc",{type:"GET",dataType:"jsonp",
timeout:2E3,error:function(b,d){if("abort"!=d)a.error=!0,c()},success:function(b){!b.error&&b.data&&"allowed"==b.data.accessControl.embed?(b="widescreen"==b.data.aspectRatio,a.height=a.height||720,a.width=Math.round(a.height*(b?16/9:4/3))):a.error=!0;c()}})},postLoad:function(a){a.obj=d('<iframe src="http://www.youtube.com/embed/'+a.id+'?version=3&autohide=1&autoplay=1&rel=0" width="'+a.width+'" height="'+a.height+'" frameborder="0"></iframe>')[0]},existingDom:!0});d.easybox.resourceHandler({height:720,
identify:function(a){if(!a.url)return!1;var c=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(a.url);return null!=c?(a.id=c[1],!0):!1},preLoad:function(a,c){d.ajax("http://vimeo.com/api/v2/video/"+a.id+".json",{type:"GET",dataType:"jsonp",timeout:2E3,error:function(b,d){if("abort"!=d)a.error=!0,c()},success:function(b){if(b.length)if("anywhere"==b[0].embed_privacy||"approved"==b[0].embed_privacy){if(b[0].width&&b[0].height)a.width=b[0].width,a.height=b[0].height}else a.error=!0;c()}})},postLoad:function(a){a.obj=
d('<iframe src="http://player.vimeo.com/video/'+a.id+'?title=0&byline=0&portrait=0&autoplay=true" width="'+a.width+'" height="'+a.height+'" frameborder="0"></iframe>')[0]},existingDom:!0})})})(jQuery);
