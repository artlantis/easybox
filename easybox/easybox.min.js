/*!
	Easybox v0.1 - Lightweight easy to use lightbox clone for jQuery
	Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(a){a("a[rel^='lightbox']").easybox({/* custom options here */},null,function(a){return this==a||this.rel.length>8&&this.rel==a.rel})});
(function(a){function S(b){b?a("object:visible").add("embed").each(function(a,b){F[a]=[b,b.style.visibility];b.style.visibility="hidden"}):(a.each(F,function(a,b){b[0].style.visibility=b[1]}),F=[]);a(document)[b?"bind":"unbind"]("keydown",Z)}function Z(b){var b=b.keyCode,f=a.inArray;return f(b,c.closeKeys)>=0?y():f(b,c.nextKeys)>=0?z():f(b,c.previousKeys)>=0?A():!1}function A(){s=!0;return B(p)}function z(){s=!1;return B(k)}function B(b){if(b>=0){g=b;p=(g||(c.loop?e.length:0))-1;k=(g+1)%e.length||
(c.loop?0:-1);G();if(p>=0&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[p][0]))(new Image).src=e[p][0];if(k>=0&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[k][0]))(new Image).src=e[k][0];T()?(a(d).addClass("easyLoading"),q=new Image,q.onload=function(){H=this.width;I=this.height;t()},q.onerror=function(){u=!0;t()},q.src=e[g][0]):(id=U())!=!1?(a(d).addClass("easyLoading"),w=a.ajax("http://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc",{type:"GET",data:{q:id},dataType:"jsonp",timeout:2E3,success:function(a){a.data.totalItems&&
(a.data.items[0].accessControl.embed=="allowed"?J=a.data.items[0].aspectRatio=="widescreen":u=!0);t()},error:function(a,b){b!="abort"&&(u=!0,t())}})):(id=V())!=!1?(a(d).addClass("easyLoading"),w=a.ajax("http://vimeo.com/api/v2/video/"+id+".json",{type:"GET",dataType:"jsonp",timeout:2E3,success:function(a){a.length&&(a[0].embed_privacy=="anywhere"||a[0].embed_privacy=="approved"?(K=a[0].width||0,L=a[0].height||0):u=!0);t()},error:function(a,b){b!="abort"&&(u=!0,t())}})):t()}return!1}function t(){var b,
f;a(d).removeClass();u?(a(d).addClass("easyError"),h=c.initWidth,l=c.initHeight,f=null,a([M,N]).html("")):(T()?(b=x({w:H,h:I}),f=a('<img src="'+e[g][0]+'" width="'+b.w+'" height="'+b.h+'" alt="'+e[g][1]+'" />')):(id=U())!=!1?(b=x({w:Math.round(c.ytPlayerHeight*(J?16/9:4/3)),h:c.ytPlayerHeight}),f=a('<iframe src="http://www.youtube.com/embed/'+id+'?version=3&autohide=1&autoplay=1&rel=0" width="'+b.w+'" height="'+b.h+'" frameborder="0"></iframe>')):(id=V())!=!1?(b=x({w:K,h:L}),f=a('<iframe src="http://player.vimeo.com/video/'+
id+'?title=0&byline=0&portrait=0&autoplay=true" width="'+b.w+'" height="'+b.h+'" frameborder="0"></iframe>')):(id=$())!=!1?(r=a("#"+id)[0],O=a(r).parent(),b=x({w:a(r).width(),h:a(r).height()}),f=a(r)):(b=x({}),f=a('<iframe width="'+b.w+'" height="'+b.h+'" src="'+e[g][0]+'" frameborder="0"></iframe>')),a(m).css({visibility:"hidden",display:""}).width(b.w).height(b.h),h=m.offsetWidth,l=m.offsetHeight,a(M).html(e[g][1]||""),a(N).html((e.length>1&&c.counterText||"").replace(/{x}/,g+1).replace(/{y}/,e.length)));
(d.offsetHeight!=l||d.offsetWidth!=h)&&a(d).animate({height:l,marginTop:-l/2,width:h,marginLeft:-h/2},c.resizeDuration,c.resizeEasing);a(d).queue(function(){a(n).css({width:h,marginLeft:-h/2,marginTop:l/2});a(j).css({marginLeft:-h/2-Math.floor(a(j).width()*1.5)});a(o).css({marginLeft:h/2+Math.ceil(a(j).width()*0.5)});a(m).css({display:"none",visibility:"",opacity:""});f!=null&&a(f).css({display:"block"}).appendTo(m);a(m).fadeIn(c.fadeDuration,aa);c.slideshow&&k>=0&&i==null&&(i=setInterval(s?A:z,c.slideshow));
c.autoClose&&(C=setInterval(y,c.autoClose))})}function aa(){p>=0&&a(j).css({display:"none",visibility:"",opacity:""}).fadeIn(c.captionFadeDuration);k>=0&&a(o).css({display:"none",visibility:"",opacity:""}).fadeIn(c.captionFadeDuration);a(n).css({opacity:""}).fadeIn(c.captionFadeDuration);a(D).css("marginTop",-D.offsetHeight).animate({marginTop:0},c.captionFadeDuration)}function G(){var b;a(d).removeClass();if(q!=null)b=q.onload=q.onerror=null,q=b;w!=null&&(w.abort(),w=null);i!=null&&(clearInterval(i),
i=null);C!=null&&(clearInterval(C),C=null);r!=null&&(a(O).append(a(r).css({display:""})),r=O=null);J=u=!1;K=L=H=I=0;a(m).empty();a([d,D]).stop(!0);a([m,n,j,o]).stop(!0).css({display:"none"})}function ba(){v=!v;s=!1;a(P).toggleClass("disabled",v);v?i!=null&&(clearInterval(i),i=null):c.slideshow&&k>=0&&i==null&&(i=setInterval(s?A:z,c.slideshow));return!1}function y(){g>=0&&(G(),g=p=k=-1,s=v=!1,a(Q).stop().fadeOut(c.fadeDuration,S),a(d).animate({height:c.closeHeight,marginTop:-c.closeHeight/2,width:c.closeWidth,
marginLeft:-c.closeWidth/2,opacity:0},c.fadeDuration,function(){R();a([d,n,j,o]).css({left:"",top:""});a(d).hide()}));return!1}function T(){return/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[g][0])}function U(){var a=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(e[g][0]);return a!=null?a[1]:!1}function V(){var a=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(e[g][0]);return a!=null?a[1]:!1}function $(){var b=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(e[g][0]);return b!=null&&a("#"+b[2]).length?
b[2]:!1}function x(a){if(!(a.w>0&&a.h>0))a.w=c.defWidth,a.h=c.defHeight;if(a.h>c.maxHeight)a.w=Math.round(c.maxHeight*a.w/a.h),a.h=c.maxHeight;if(a.w>c.maxWidth)a.h=Math.round(c.maxWidth/a.w*a.h),a.w=c.maxWidth;return a}function ca(b){if(c.dragDrop)return E=!0,a([d,n,j,o]).css({cursor:"pointer"}),W=b.pageX-a(this).position().left,X=b.pageY-a(this).position().top,!1}function da(b){if(c.dragDrop&&E){var f=b.pageX-a(window).scrollLeft()-W,b=b.pageY-a(window).scrollTop()-X;a([d,n,j,o]).css({left:f+"px",
top:b+"px"})}}function R(){E&&(E=!1,a([d,n,j,o]).css({cursor:""}))}var c,e,g=-1,p,k,h,l,F=[],s=!1,v=!1,E=!1,W=0,X=0,q=null,w=null,r=null,O=null,i=null,C=null,H=0,I=0,K=0,L=0,J=0,u=!1,Q,d,m,j,o,P,n,D,M,N;a(function(){a("body").append(a([Q=a('<div id="easyOverlay" />').click(y)[0],d=a('<div id="easyCenter" />').append([m=a('<div id="easyContainer" />')[0]])[0],j=a('<a id="easyPrevLink" href="#" />').click(A)[0],o=a('<a id="easyNextLink" href="#" />').click(z)[0],n=a('<div id="easyBottomContainer" />').append([D=
a('<div id="easyBottom" />').append([a('<a id="easyCloseLink" href="#" />').click(y)[0],P=a('<a id="easySlideLink" href="#" />').click(ba)[0],M=a('<div id="easyCaption" />')[0],N=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"));a([d,n,j,o]).mousedown(ca).mousemove(da).mouseup(R).mouseleave(R)});a.easybox=function(b,f,j,i){var Y=!1;g>=0&&(G(),g=p=k=-1,s=v=!1,Y=!0);c=a.extend({loop:!1,dynOpts:!0,dragDrop:!0,overlayOpacity:0.8,resizeDuration:400,
resizeEasing:"easybox",fadeDuration:400,initWidth:250,initHeight:250,defWidth:960,defHeight:720,closeWidth:128,closeHeight:128,maxWidth:1280,maxHeight:720,maxScreenFill:0.7,ytPlayerHeight:480,captionFadeDuration:200,slideshow:0,autoClose:0,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},j);c.dynOpts&&a("#easyOptions").length&&(j=a.parseJSON(a("#easyOptions").html()),a.each(j,function(b,f){if(b=="global"||typeof i=="string"&&b==i)c=a.extend(c,f)}));typeof b=="string"&&
(b=[[b,f]],f=0);if(c.maxScreenFill)c.maxWidth=Math.min(Math.round(screen.width*c.maxScreenFill),c.maxWidth),c.maxHeight=Math.min(Math.round(screen.height*c.maxScreenFill),c.maxHeight);e=b;c.loop=c.loop&&e.length>1;a(P).css({display:c.slideshow&&e.length>1?"":"none"});Y?B(f):(h=c.initWidth,l=c.initHeight,a(d).css({width:h,height:l,marginLeft:-h/2,marginTop:-l/2,opacity:""}),S(1),a(d).show(),a(Q).css("opacity",c.overlayOpacity).fadeIn(c.fadeDuration,function(){B(f)}));return!1};a.fn.easybox=function(b,
c,d){var c=c||function(a){return[a.href,a.title]},d=d||function(a){return this==a},e=this;return e.unbind("click").click(function(){var g=this,j=0,i,h=0,k;i=a.grep(e,function(a,b){return d.call(g,a,b)});for(k=i.length;h<k;++h)i[h]==g&&(j=h),i[h]=c(i[h],h);return a.easybox(i,j,b,a(g).attr("rel")||null)})};a.easing.easybox=function(a){return a<0.7?Math.pow(a/0.7,2)*1.2:1.2-Math.sqrt((a-0.7)/(1-0.7))*0.2}})(jQuery);
