/*!
	Easybox v0.1 - Lightweight easy to use lightbox clone for jQuery
	Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(a){a("a[rel^='lightbox']").easybox({/* custom options here */},null,function(a){return this==a||this.rel.length>8&&this.rel==a.rel})});
(function(a){function F(c){c?a("object").add("embed").each(function(a,c){w[a]=[c,c.style.visibility];c.style.visibility="hidden"}):(a.each(w,function(a,c){c[0].style.visibility=c[1]}),w=[]);a(document)[c?"bind":"unbind"]("keydown",N)}function N(c){var c=c.keyCode,j=a.inArray;return j(c,b.closeKeys)>=0?G():j(c,b.nextKeys)>=0?H():j(c,b.previousKeys)>=0?I():!1}function I(){return x(l)}function H(){return x(m)}function x(c){if(c>=0){f=c;l=(f||(b.loop?d.length:0))-1;m=(f+1)%d.length||(b.loop?0:-1);J();
if(l>=0&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[l][0]))(new Image).src=d[l][0];if(m>=0&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[m][0]))(new Image).src=d[m][0];K()?(a(e).addClass("easyLoading"),g=new Image,g.onload=function(){y=this.width;z=this.height;n()},g.onerror=function(){o=!0;n()},g.src=d[f][0]):(id=L())!=!1?(a(e).addClass("easyLoading"),q=a.ajax("http://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc",{type:"GET",data:{q:id},dataType:"jsonp",timeout:2E3,success:function(a){a.data.totalItems&&
(a.data.items[0].accessControl.embed=="allowed"?A=a.data.items[0].aspectRatio=="widescreen":o=!0);n()},error:function(a,c){c!="abort"&&(o=!0,n())}})):(id=M())!=!1?(a(e).addClass("easyLoading"),q=a.ajax("http://vimeo.com/api/v2/video/"+id+".json",{type:"GET",dataType:"jsonp",timeout:2E3,success:function(a){a.length&&(a[0].embed_privacy=="anywhere"||a[0].embed_privacy=="approved"?(B=a[0].width||0,C=a[0].height||0):o=!0);n()},error:function(a,c){c!="abort"&&(o=!0,n())}})):n()}return!1}function n(){var c,
j;a(e).removeClass();o?(a(e).addClass("easyError"),i=b.initWidth,h=b.initHeight,a([D,E]).html("")):(K()?(c=s({w:y,h:z}),j=a('<img src="'+d[f][0]+'" width="'+c.w+'" height="'+c.h+'" alt="'+d[f][1]+'" />')):(id=L())!=!1?(c=s({w:Math.round(b.ytPlayerHeight*(A?16/9:4/3)),h:b.ytPlayerHeight}),j=a('<iframe src="http://www.youtube.com/embed/'+id+'?version=3&autohide=1&autoplay=1&rel=0" width="'+c.w+'" height="'+c.h+'" frameborder="0"></iframe>')):(id=M())!=!1?(c=s({w:B,h:C}),j=a('<iframe src="http://player.vimeo.com/video/'+
id+'?title=0&byline=0&portrait=0&autoplay=true" width="'+c.w+'" height="'+c.h+'" frameborder="0"></iframe>')):(c=s({}),j=a('<iframe width="'+c.w+'" height="'+c.h+'" src="'+d[f][0]+'"></iframe>')),a(k).css({visibility:"hidden",display:""}).width(c.w).height(c.h),i=k.offsetWidth,h=k.offsetHeight,a(D).html(d[f][1]||""),a(E).html((d.length>1&&b.counterText||"").replace(/{x}/,f+1).replace(/{y}/,d.length)));(e.offsetHeight!=h||e.offsetWidth!=i)&&a(e).animate({height:h,marginTop:-h/2,width:i,marginLeft:-i/
2},b.resizeDuration,b.resizeEasing);a(e).queue(function(){a(t).css({width:i,marginLeft:-i/2,marginTop:h/2});a(p).css({marginLeft:-i/2-Math.floor(a(p).width()*1.5)});a(r).css({marginLeft:i/2+Math.ceil(a(p).width()*0.5)});a(k).append(j).css({display:"none",visibility:"",opacity:""}).fadeIn(b.fadeDuration,O)})}function O(){l>=0&&a(p).css({display:"none",visibility:"",opacity:""}).fadeIn(b.captionFadeDuration);m>=0&&a(r).css({display:"none",visibility:"",opacity:""}).fadeIn(b.captionFadeDuration);a(t).css({visibility:"",
display:""});a(u).css("marginTop",-u.offsetHeight).animate({marginTop:0},b.captionFadeDuration)}function J(){var c;a(e).removeClass();if(g!=null)c=g.onload=g.onerror=null,g=c;q!=null&&(q.abort(),q=null);A=o=!1;B=C=y=z=0;a(k).empty();a([e,k,u,p,r]).stop(!0);a([k,t,p,r]).css({display:"none"})}function G(){f>=0&&(J(),f=l=m=-1,a(v).stop().fadeOut(b.fadeDuration,F),a(e).animate({height:b.closeHeight,marginTop:-b.closeHeight/2,width:b.closeWidth,marginLeft:-b.closeWidth/2,opacity:0},b.fadeDuration,function(){a(e).hide()}));
return!1}function K(){return/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[f][0])}function L(){var a=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9]*)(&(.*))?/i.exec(d[f][0]);return a!=null?a[1]:!1}function M(){var a=a=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?/i.exec(d[f][0]);return a!=null?a[1]:!1}function s(a){if(!(a.w>0&&a.h>0))a.w=b.defWidth,a.h=b.defHeight;if(a.h>b.maxHeight)a.w=Math.round(b.maxHeight*a.w/a.h),a.h=b.maxHeight;if(a.w>b.maxWidth)a.h=Math.round(b.maxWidth/a.w*a.h),a.w=b.maxWidth;return a}
var b,d,f=-1,l,m,i,h,w=[],g=null,q=null,y=0,z=0,B=0,C=0,A=0,o=!1,v,e,k,p,r,t,u,D,E;a(function(){a("body").append(a([v=a('<div id="easyOverlay" />')[0],e=a('<div id="easyCenter" />').append([k=a('<div id="easyContainer" />')[0]])[0],p=a('<a id="easyPrevLink" href="#" />').click(I)[0],r=a('<a id="easyNextLink" href="#" />').click(H)[0],t=a('<div id="easyBottomContainer" />').append([u=a('<div id="easyBottom" />').append([a('<a id="easyCloseLink" href="#" />').add(v).click(G)[0],D=a('<div id="easyCaption" />')[0],
E=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"))});a.easybox=function(c,j,g){if(f>=0)return!1;b=a.extend({loop:!1,overlayOpacity:0.8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initWidth:250,initHeight:250,defWidth:960,defHeight:720,closeWidth:128,closeHeight:128,maxWidth:1280,maxHeight:720,maxScreenFill:0.7,ytPlayerHeight:480,captionFadeDuration:200,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,
78]},g);typeof c=="string"&&(c=[[c,j]],j=0);if(b.maxScreenFill)b.maxWidth=Math.min(Math.round(screen.width*b.maxScreenFill),b.maxWidth),b.maxHeight=Math.min(Math.round(screen.height*b.maxScreenFill),b.maxHeight);d=c;b.loop=b.loop&&d.length>1;i=b.initWidth;h=b.initHeight;a(e).css({width:i,height:h,marginLeft:-i/2,marginTop:-h/2,opacity:""});F(1);a(e).show();a(v).css("opacity",b.overlayOpacity).fadeIn(b.fadeDuration,function(){x(j)});return!1};a.fn.easybox=function(c,b,d){var b=b||function(a){return[a.href,
a.title]},d=d||function(){return!0},e=this;return e.unbind("click").click(function(){var f=this,i=0,g,h=0,k;g=a.grep(e,function(a,c){return d.call(f,a,c)});for(k=g.length;h<k;++h)g[h]==f&&(i=h),g[h]=b(g[h],h);return a.easybox(g,i,c)})};a.easing.easybox=function(a){return a<0.7?Math.pow(a/0.7,2)*1.2:1.2-Math.sqrt((a-0.7)/(1-0.7))*0.2}})(jQuery);
