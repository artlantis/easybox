/*
        Easybox v1.3 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(b){b("a.lightbox").easybox({/* custom options here */},null,function(a){return this==a||-1!=this.className.indexOf("lightbox")&&this.hasAttribute("data-group")&&this.getAttribute("data-group")==a.getAttribute("data-group")})});
(function(a){function R(d){d?a("object:visible").add("embed").each(function(b,a){G[b]=[a,a.style.visibility];a.style.visibility="hidden"}):(a.each(G,function(b,a){a[0].style.visibility=a[1]}),G=[]);d=d?"bind":"unbind";a(document)[d]("keydown",$);if(a.fn.mousewheel)a(window)[d]("mousewheel",aa);a(f)[d]("mousedown",ba)[d]("mousemove",S)[d]("mouseup",H);a(window)[d]("mousemove",S)[d]("mouseup",H)}function $(d){var d=d.keyCode,b=a.inArray;return v?!0:0<=b(d,c.closeKeys)?A():0<=b(d,c.nextKeys)&&!c.noNavigation?
B():0<=b(d,c.previousKeys)&&!c.noNavigation?C():!c.preventOtherKeys}function aa(a,b){return v?!0:0<b&&!c.noNavigation?C():0>b&&!c.noNavigation?B():!c.preventOtherKeys}function C(){p=!0;return I(j)}function B(){p=!1;return I(k)}function T(){if(c.slideshow&&!q&&null==g){if(p&&0<=j)return g=setTimeout(C,c.slideshow),!1;if(!p&&0<=k)return g=setTimeout(B,c.slideshow),!1}c.autoClose&&null==w&&(w=setTimeout(U,c.autoClose));return!1}function I(d){0<=d&&d<e.length&&(i=d,j=(i||(c.loop?e.length:0))-1,k=(i+1)%
e.length||(c.loop?0:-1),J(),c.busyTimeout&&(D=setTimeout(ca,c.busyTimeout)),c.preloadNext&&(0<=j&&K(j),0<=k&&K(k)),e[i].loaded||a(L).show(),K(i));return!1}function da(){var d=e[i];a(L).hide();if(d.error)a(h).addClass("error").width(c.errorSize[0]).height(c.errorSize[1]);else{if("inline"==d.type)r=d.obj,M=a(r).parent(),N=a(r).css("display");d.caption.length&&a(x).html(d.caption).css({display:""});a(h).width(d.width).height(d.height)}1<e.length&&c.counterText.length&&a(y).html(c.counterText.replace(/{x}/,
i+1).replace(/{y}/,e.length)).css({display:""});a(h).css({visibility:"hidden",display:""});V([h.offsetWidth,h.offsetHeight],-1,c.resizeDuration);a(f).queue(function(b){a(h).css({visibility:"",display:"none"});null!=d.obj&&a(d.obj).css({display:"block"}).appendTo(h);a(h).fadeIn(c.fadeDuration,ea);T();b()})}function V(d,b,c){n=d.slice();var e={};if(f.offsetHeight!=d[1]||f.offsetWidth!=d[0])e={height:d[1],marginTop:-d[1]/2,width:d[0],marginLeft:-d[0]/2};if(-1<b)e.opacity=b;a(f).animate(e,c)}function ea(){v=
!1;if(!c.hideBottom){if((0<=j||0<=k)&&!c.noNavigation&&!c.hideButtons)a(O).css({display:""}),a([x,y]).addClass("nav"),0<=j&&a(s).fadeIn(c.captionFadeDuration),0<=k&&a(u).fadeIn(c.captionFadeDuration);a(z).fadeIn(c.captionFadeDuration);a(f).animate({height:n[1]+z.offsetHeight},c.captionFadeDuration,c.resizeEasing)}}function J(){v=!0;null!=g&&(clearTimeout(g),g=null);null!=D&&(clearTimeout(D),D=null);null!=w&&(clearTimeout(w),w=null);null!=r&&(a(M).append(a(r).css({display:N})),r=M=N=null);a(h).empty().removeClass();
a([f,z,h,s,u]).stop(!0);a(f).css({width:n[0],height:n[1],marginLeft:-n[0]/2,marginTop:-n[1]/2,opacity:""});a([O,x,y,h,z,s,u]).css({display:"none",opacity:""});a([x,y]).removeClass().html("").css({display:c.hideCaption?"none":""})}function fa(){q=!q;p=!1;a(P).toggleClass("disabled",q);q?null!=g&&(clearTimeout(g),g=null):T();return!1}function A(d){if(!(c.noClose&&1!=d))return 0<=i&&(J(),i=j=k=-1,a(Q).stop().fadeOut(c.fadeDuration,R),V(c.initCenterSize,0,c.fadeDuration),a(f).queue(function(b){H();a(f).css({left:"",
top:""}).hide();b()})),!1}function U(){A(1)}function ca(){v=!1}function K(d){var b=e[d];b.loaded&&o(d);if(!b.loading)if(b.loading=!0,/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[d].url))b.type="image",ga(d);else{var c=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(e[d].url);!1!=(id=null!=c?c[1]:!1)?(b.type="youtube",b.id=id,W(d)):(c=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(e[d].url),!1!=(id=null!=c?c[1]:!1)?(b.type="vimeo",b.id=id,W(d)):(c=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(e[d].url),
!1!=(id=null!=c&&a("#"+c[2]).length?c[2]:!1)?(b.type="inline",b.id=id,b=e[d],(c=a("#"+b.id)[0])?(b.width=b.width||a(c).width(),b.height=b.height||a(c).height(),b.obj=c):b.error=!0):b.type="iframe",o(d)))}}function o(d){var b=e[d];if(!b.loaded){b.loaded=!0;if(!b.width||!b.height)b.width=c.defaultContentSize[0],b.height=c.defaultContentSize[1];if(b.height>c.maximumContentSize[1])b.width=Math.round(c.maximumContentSize[1]*b.width/b.height),b.height=c.maximumContentSize[1];if(b.width>c.maximumContentSize[0])b.height=
Math.round(c.maximumContentSize[0]/b.width*b.height),b.width=c.maximumContentSize[0];if(!b.error)if("image"==b.type)b.obj=a('<img src="'+b.url+'" width="'+b.width+'" height="'+b.height+'" alt="'+b.caption+'" />')[0];else if("youtube"==b.type){var m="?version=3&autohide=1&autoplay=1&rel=0";if(c.ytPlayerTheme&&null!=(t=/^([a-z]*),([a-z]*)$/.exec(c.ytPlayerTheme)))m+="&theme="+t[1]+"&color="+t[2];b.obj=a('<iframe src="http://www.youtube.com/embed/'+b.id+m+'" width="'+b.width+'" height="'+b.height+'" frameborder="0"></iframe>')[0]}else if("vimeo"==
b.type)b.obj=a('<iframe src="http://player.vimeo.com/video/'+b.id+'?title=0&byline=0&portrait=0&autoplay=true" width="'+b.width+'" height="'+b.height+'" frameborder="0"></iframe>')[0];else if("iframe"==b.type)b.obj=a('<iframe width="'+b.width+'" height="'+b.height+'" src="'+b.url+'" frameborder="0"></iframe>')[0]}d==i&&da()}function ga(a){var b=e[a],c=new Image;c.onload=function(){b.width=b.width||this.width;b.height=b.height||this.height;o(a)};c.onerror=function(){b.error=!0;o(a)};c.src=b.url}function W(d){var b=
e[d],m,f;f={type:"GET",dataType:"jsonp",timeout:2E3,error:function(a,c){if("abort"!=c)b.error=!0,o(d)}};if("youtube"==b.type)m="http://gdata.youtube.com/feeds/api/videos/"+b.id+"?v=2&alt=jsonc",f.success=function(a){!a.error&&a.data&&"allowed"==a.data.accessControl.embed?(a="widescreen"==a.data.aspectRatio,b.height=b.height||c.ytPlayerHeight,b.width=Math.round(b.height*(a?16/9:4/3))):b.error=!0;o(d)};else if("vimeo"==b.type)m="http://vimeo.com/api/v2/video/"+b.id+".json",f.success=function(a){if(a.length)if("anywhere"==
a[0].embed_privacy||"approved"==a[0].embed_privacy){if(a[0].width&&a[0].height)b.width=a[0].width,b.height=a[0].height}else b.error=!0;o(d)};a.ajax(m,f)}function ba(d){return c.dragDrop?(E=!0,a([f,s,u]).css({cursor:"pointer"}),X=d.pageX-a(this).position().left,Y=d.pageY-a(this).position().top,!1):!0}function S(d){if(c.dragDrop&&E){var b=d.pageX-a(window).scrollLeft()-X,d=d.pageY-a(window).scrollTop()-Y;a(f).css({left:b+"px",top:d+"px"});return!1}return!0}function H(){return E?(E=!1,a([f,s,u]).css({cursor:""}),
!1):!0}var F,c,e,i=-1,j,k,n,G=[],p=!1,q=!1,E=!1,X=0,Y=0,v=!1,r=null,M=null,N=null,D=null,g=null,w=null,Q,f,h,O,s,u,P,Z,z,x,y,L;a(function(){F={loop:!1,preloadNext:!0,dragDrop:!0,hideBottom:!1,hideCaption:!1,hideButtons:!1,noNavigation:!1,noClose:!1,overlayOpacity:0.8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initCenterSize:[250,250],errorSize:[320,180],defaultContentSize:[960,720],maximumContentSize:[1280,720],ytPlayerHeight:480,ytPlayerTheme:"light,white",captionFadeDuration:200,
slideshow:0,autoClose:0,busyTimeout:800,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],preventOtherKeys:!0};a("body").append(a([Q=a('<div id="easyOverlay" />').click(A)[0],f=a('<div id="easyCenter" />').append([h=a('<div id="easyContainer" />')[0],L=a('<div id="easyLoadingIndicator" />')[0],z=a('<div id="easyBottom" />').append([O=a('<div id="easyNavigation" />').append([s=a('<a id="easyPrevLink" href="#" />').click(C)[0],u=a('<a id="easyNextLink" href="#" />').click(B)[0]])[0],
Z=a('<a id="easyCloseLink" href="#" />').click(A)[0],P=a('<a id="easySlideLink" href="#" />').click(fa)[0],x=a('<div id="easyCaption" />')[0],y=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"))});a.fn.easybox=function(c,b,e){var b=b||function(a){var b={url:a.href,caption:a.title};if(a.hasAttribute("data-width"))b.width=a.getAttribute("data-width");if(a.hasAttribute("data-height"))b.height=a.getAttribute("data-height");return b},e=e||function(a){return this==
a},f=this;return f.unbind("click").click(function(){var i=this,h=0,g,l=0,j;g=a.grep(f,function(a,b){return e.call(i,a,b)});for(j=g.length;l<j;++l)g[l]==i&&(h=l),g[l]=b(g[l],l);if(a("#easyOptions").length){var k=a(i).attr("rel")||null,l=a.parseJSON(a("#easyOptions").html());a.each(l,function(b,e){if("global"==b||"string"==typeof k&&b==k)c=a.extend(c,e)})}return a.easybox(g,h,c)})};a.easybox=function(d,b,g){if(0<=i)return!1;c=a.extend({},F,g);var g=0,h;e=[];for(h=d.length;g<h;++g)e.push(a.extend({url:"",
caption:"",width:0,height:0},d[g],{type:"",loaded:!1,loading:!1,error:!1,obj:null}));b=Math.min(e.length-1,b||0);c.loop=c.loop&&1<e.length;c.slideshow=c.slideshow&&1<e.length?c.slideshow:0;a(P).css({display:c.slideshow&&1<e.length&&!c.hideButtons?"":"none"});p=q=!1;a(Z).css({display:!c.hideButtons?"":"none"});n=c.initCenterSize.slice();R(1);J();a(f).show();a(Q).css("opacity",c.overlayOpacity).fadeIn(c.fadeDuration,function(){I(b)});return!1};a.easybox.close=U;a.easybox.isOpen=function(){return 0<=
i};a.easybox.defaults=function(c){F=a.extend(F,c)};a.easing.easybox=function(a){return 0.7>a?1.2*Math.pow(a/0.7,2):1.2-0.2*Math.sqrt((a-0.7)/(1-0.7))}})(jQuery);
