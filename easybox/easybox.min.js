/*!
	Easybox v0.1 - Lightweight easy to use lightbox clone for jQuery
	Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(a){a("a[rel^='lightbox']").easybox({/* custom options here */},null,function(a){return this==a||this.rel.length>8&&this.rel==a.rel})});
(function(a){function U(b){b?a("object:visible").add("embed").each(function(a,b){F[a]=[b,b.style.visibility];b.style.visibility="hidden"}):(a.each(F,function(a,b){b[0].style.visibility=b[1]}),F=[]);a(document)[b?"bind":"unbind"]("keydown",ca)}function ca(b){var b=b.keyCode,h=a.inArray;return h(b,c.closeKeys)>=0?A():h(b,c.nextKeys)>=0?G():h(b,c.previousKeys)>=0?H():!1}function H(){u=!0;return B(i)}function G(){u=!1;return B(k)}function V(){if(c.slideshow&&!v&&m==null)if(u&&i>=0)return m=setInterval(H,
c.slideshow),!1;else if(!u&&k>=0)return m=setInterval(G,c.slideshow),!1;c.autoClose&&y==null&&(y=setInterval(A,c.autoClose));return!1}function B(a){if(a>=0){f=a;i=(f||(c.loop?d.length:0))-1;k=(f+1)%d.length||(c.loop?0:-1);I();if(i>=0&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[i][0]))(new Image).src=d[i][0];if(k>=0&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[k][0]))(new Image).src=d[k][0];W()?da():(id=X())!=!1?Y(0,id):(id=Z())!=!1?Y(1,id):w()}return!1}function w(){var b,h;if(x)a(e).addClass("easyError"),g=
c.initWidth,n=c.initHeight,h=null,a([J,K]).html("");else{if(W())b=z({w:L,h:M}),h=a('<img src="'+d[f][0]+'" width="'+b.w+'" height="'+b.h+'" alt="'+d[f][1]+'" />');else if((id=X())!=!1){var l="?version=3&autohide=1&autoplay=1&rel=0";if(c.ytPlayerTheme&&(r=/^([a-z]*),([a-z]*)$/.exec(c.ytPlayerTheme))!=null)l+="&theme="+r[1]+"&color="+r[2];c.loopVideos&&(l+="&loop=1&playlist="+id);b=z({w:Math.round(c.ytPlayerHeight*(N?16/9:4/3)),h:c.ytPlayerHeight});h=a('<iframe src="http://www.youtube.com/embed/'+id+
l+'" width="'+b.w+'" height="'+b.h+'" frameborder="0"></iframe>')}else(id=Z())!=!1?(l="?title=0&byline=0&portrait=0&autoplay=true",b=z({w:O,h:P}),c.loopVideos&&(l+="&loop=true"),h=a('<iframe src="http://player.vimeo.com/video/'+id+l+'" width="'+b.w+'" height="'+b.h+'" frameborder="0"></iframe>')):(id=ea())!=!1?(s=a("#"+id)[0],Q=a(s).parent(),b=z({w:a(s).width(),h:a(s).height()}),h=a(s)):(b=z({}),h=a('<iframe width="'+b.w+'" height="'+b.h+'" src="'+d[f][0]+'" frameborder="0"></iframe>'));a(o).css({visibility:"hidden",
display:""}).width(b.w).height(b.h);g=o.offsetWidth;n=o.offsetHeight;a(J).html(d[f][1]||"");a(K).html((d.length>1&&c.counterText||"").replace(/{x}/,f+1).replace(/{y}/,d.length))}(e.offsetHeight!=n||e.offsetWidth!=g)&&a(e).animate({height:n,marginTop:-n/2,width:g,marginLeft:-g/2},c.resizeDuration,c.resizeEasing);a(e).queue(function(){a(p).css({width:g,marginLeft:-g/2,marginTop:n/2});a(j).css({marginLeft:-g/2-Math.floor(a(j).width()*1.5)});a(q).css({marginLeft:g/2+Math.ceil(a(j).width()*0.5)});a(o).css({display:"none",
visibility:"",opacity:""});h!=null&&a(h).css({display:"block"}).appendTo(o);a(o).fadeIn(c.fadeDuration,fa);V()})}function fa(){i>=0&&a(j).css({display:"none",visibility:"",opacity:""}).fadeIn(c.captionFadeDuration);k>=0&&a(q).css({display:"none",visibility:"",opacity:""}).fadeIn(c.captionFadeDuration);a(p).css({opacity:""}).fadeIn(c.captionFadeDuration);a(C).css("marginTop",-C.offsetHeight).animate({marginTop:0},c.captionFadeDuration)}function I(){var b;a(e).removeClass();if(t!=null)b=t.onload=t.onerror=
null,t=b;D!=null&&(D.abort(),D=null);m!=null&&(clearInterval(m),m=null);y!=null&&(clearInterval(y),y=null);s!=null&&(a(Q).append(a(s).css({display:""})),s=Q=null);N=x=!1;O=P=L=M=0;a(o).empty();a([e,C]).stop(!0);a([o,p,j,q]).stop(!0).css({display:"none"})}function ga(){v=!v;u=!1;a(R).toggleClass("disabled",v);v?m!=null&&(clearInterval(m),m=null):V();return!1}function A(){f>=0&&(I(),f=i=k=-1,u=v=!1,a(S).stop().fadeOut(c.fadeDuration,U),a(e).animate({height:c.closeHeight,marginTop:-c.closeHeight/2,width:c.closeWidth,
marginLeft:-c.closeWidth/2,opacity:0},c.fadeDuration,function(){T();a([e,p,j,q]).css({left:"",top:""});a(e).hide()}));return!1}function W(){return/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[f][0])}function X(){var a=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(d[f][0]);return a!=null?a[1]:!1}function Z(){var a=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(d[f][0]);return a!=null?a[1]:!1}function ea(){var b=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(d[f][0]);return b!=null&&a("#"+b[2]).length?
b[2]:!1}function da(){a(e).addClass("easyLoading");t=new Image;t.onload=function(){L=this.width;M=this.height;a(e).removeClass("easyLoading");w()};t.onerror=function(){x=!0;w()};t.src=d[f][0]}function Y(b,c){var d,f;a(e).addClass("easyLoading");f={type:"GET",dataType:"jsonp",timeout:2E3,error:function(a,b){b!="abort"&&(x=!0,w())}};if(b==0)d="http://gdata.youtube.com/feeds/api/videos/"+c+"?v=2&alt=jsonc",f.success=function(b){!b.error&&b.data&&b.data.accessControl.embed=="allowed"?N=b.data.aspectRatio==
"widescreen":x=!0;a(e).removeClass("easyLoading");w()};else if(b==1)d="http://vimeo.com/api/v2/video/"+c+".json",f.success=function(b){b.length&&(b[0].embed_privacy=="anywhere"||b[0].embed_privacy=="approved"?(O=b[0].width||0,P=b[0].height||0):x=!0);a(e).removeClass("easyLoading");w()};D=a.ajax(d,f)}function z(a){if(!(a.w>0&&a.h>0))a.w=c.defWidth,a.h=c.defHeight;if(a.h>c.maxHeight)a.w=Math.round(c.maxHeight*a.w/a.h),a.h=c.maxHeight;if(a.w>c.maxWidth)a.h=Math.round(c.maxWidth/a.w*a.h),a.w=c.maxWidth;
return a}function ha(b){if(c.dragDrop)return E=!0,a([e,p,j,q]).css({cursor:"pointer"}),aa=b.pageX-a(this).position().left,ba=b.pageY-a(this).position().top,!1}function ia(b){if(c.dragDrop&&E){var d=b.pageX-a(window).scrollLeft()-aa,b=b.pageY-a(window).scrollTop()-ba;a([e,p,j,q]).css({left:d+"px",top:b+"px"})}}function T(){E&&(E=!1,a([e,p,j,q]).css({cursor:""}))}var c,d,f=-1,i,k,g,n,F=[],u=!1,v=!1,E=!1,aa=0,ba=0,t=null,D=null,s=null,Q=null,m=null,y=null,L=0,M=0,O=0,P=0,N=0,x=!1,S,e,o,j,q,R,p,C,J,K;
a(function(){a("body").append(a([S=a('<div id="easyOverlay" />').click(A)[0],e=a('<div id="easyCenter" />').append([o=a('<div id="easyContainer" />')[0]])[0],j=a('<a id="easyPrevLink" href="#" />').click(H)[0],q=a('<a id="easyNextLink" href="#" />').click(G)[0],p=a('<div id="easyBottomContainer" />').append([C=a('<div id="easyBottom" />').append([a('<a id="easyCloseLink" href="#" />').click(A)[0],R=a('<a id="easySlideLink" href="#" />').click(ga)[0],J=a('<div id="easyCaption" />')[0],K=a('<div id="easyNumber" />')[0],
a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"));a([e,p,j,q]).mousedown(ha).mousemove(ia).mouseup(T).mouseleave(T)});a.easybox=function(b,h,l,j){var $=!1;f>=0&&(I(),f=i=k=-1,u=v=!1,$=!0);c=a.extend({loop:!1,loopVideos:!1,dynOpts:!0,dragDrop:!0,overlayOpacity:0.8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initWidth:250,initHeight:250,defWidth:960,defHeight:720,closeWidth:128,closeHeight:128,maxWidth:1280,maxHeight:720,maxScreenFill:0.7,ytPlayerHeight:480,ytPlayerTheme:"light,white",
captionFadeDuration:200,slideshow:0,autoClose:0,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},l);c.dynOpts&&a("#easyOptions").length&&(l=a.parseJSON(a("#easyOptions").html()),a.each(l,function(b,d){if(b=="global"||typeof j=="string"&&b==j)c=a.extend(c,d)}));typeof b=="string"&&(b=[[b,h]],h=0);if(c.maxScreenFill)c.maxWidth=Math.min(Math.round(screen.width*c.maxScreenFill),c.maxWidth),c.maxHeight=Math.min(Math.round(screen.height*c.maxScreenFill),c.maxHeight);
d=b;c.loop=c.loop&&d.length>1;c.slideshow=c.slideshow&&d.length>1?c.slideshow:0;a(R).css({display:c.slideshow&&d.length>1?"":"none"});$?B(h):(g=c.initWidth,n=c.initHeight,a(e).css({width:g,height:n,marginLeft:-g/2,marginTop:-n/2,opacity:""}),U(1),a(e).show(),a(S).css("opacity",c.overlayOpacity).fadeIn(c.fadeDuration,function(){B(h)}));return!1};a.fn.easybox=function(b,c,d){var c=c||function(a){return[a.href,a.title]},d=d||function(a){return this==a},f=this;return f.unbind("click").click(function(){var e=
this,j=0,g,i=0,k;g=a.grep(f,function(a,b){return d.call(e,a,b)});for(k=g.length;i<k;++i)g[i]==e&&(j=i),g[i]=c(g[i],i);return a.easybox(g,j,b,a(e).attr("rel")||null)})};a.easing.easybox=function(a){return a<0.7?Math.pow(a/0.7,2)*1.2:1.2-Math.sqrt((a-0.7)/(1-0.7))*0.2}})(jQuery);
