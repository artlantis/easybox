/*
        Easybox v1.3 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
(function(a){function B(c){if(m||0>c||c>=e.length)return!1;C();i=c;k=(i||(b.loop?e.length:0))-1;g=(i+1)%e.length||(b.loop?0:-1);b.preloadNext&&(0<=k&&D(k),0<=g&&D(g));e[i].loaded||a(E).show();D(i);return!1}function V(){var c=e[i];a(E).hide();c.error?a(j).addClass("error").width(b.errorSize[0]).height(b.errorSize[1]):(c.caption.length&&a(n).html(c.caption).css({display:""}),a(j).width(c.width).height(c.height));1<e.length&&b.counterText.length&&a(o).html(b.counterText.replace(/{x}/,i+1).replace(/{y}/,
e.length)).css({display:""});a(j).css({visibility:"hidden",display:""});O([j.offsetWidth,j.offsetHeight],-1,b.resizeDuration);a(h).queue(function(d){a(j).css({visibility:"",display:"none"});c.error||(a(c.obj).appendTo(j),c.handler.show(c));m=!1;a(j).fadeIn(b.fadeDuration,W);P();d()})}function O(c,b,p){l=c.slice();var e={};if(h.offsetHeight!=c[1]||h.offsetWidth!=c[0])e={height:c[1],marginTop:-c[1]/2,width:c[0],marginLeft:-c[0]/2};if(-1<b)e.opacity=b;a(h).animate(e,p)}function W(){if(!b.hideBottom){if((0<=
k||0<=g)&&!b.noNavigation&&!b.hideButtons)a(F).css({display:""}),a([n,o]).addClass("nav"),0>k&&a(x).addClass("disabled"),0>g&&a(y).addClass("disabled");a(t).fadeIn(b.captionFadeDuration);a(h).animate({height:l[1]+t.offsetHeight},b.captionFadeDuration,b.resizeEasing)}}function C(){m=!0;null!=f&&(clearTimeout(f),f=null);null!=u&&(clearTimeout(u),u=null);if(0<=i){var c=e[i];c.error||c.handler.hide(c)}a(j).empty().removeClass();a([h,t,j,x,y]).stop(!0);a(h).css({width:l[0],height:l[1],marginLeft:-l[0]/
2,marginTop:-l[1]/2,opacity:""});a([F,n,o,j,t]).css({display:"none",opacity:""});a([n,o,x,y]).removeClass();a([n,o]).html("").css({display:b.hideCaption?"none":""})}function G(){if(!q)return!1;C();i=k=g=-1;H();Q(0);a(I).stop().fadeOut(b.fadeDuration);O(b.initCenterSize,0,b.fadeDuration);a(h).queue(function(c){a(h).css({left:"",top:""}).hide();q=!1;c()});return!1}function v(){r=!0;return B(k)}function w(){r=!1;return B(g)}function J(){return m||b.noClose?!1:G()}function X(){if(m)return!1;s=!s;r=!1;
a(K).toggleClass("disabled",s);s?null!=f&&(clearTimeout(f),f=null):P();return!1}function P(){if(b.slideshow&&!s&&null==f){if(r&&0<=k)return f=setTimeout(v,b.slideshow),!1;if(!r&&0<=g)return f=setTimeout(w,b.slideshow),!1}b.autoClose&&null==u&&(u=setTimeout(G,b.autoClose));return!1}function D(a){var b=e[a];b.loaded&&L(a);if(!b.loading){b.loading=!0;for(var p=z.length-1;0<=p;--p)if(z[p].identify(b)){b.handler=z[p];b.handler.preLoad(b,function(){L(a)});return}b.error=!0;L(a)}}function L(a){var d=e[a];
if(!d.loaded&&(d.loaded=!0,!d.error)){if(!d.width||!d.height)d.width=b.defaultContentSize[0],d.height=b.defaultContentSize[1];if(d.height>b.maximumContentSize[1])d.width=Math.round(b.maximumContentSize[1]*d.width/d.height),d.height=b.maximumContentSize[1];if(d.width>b.maximumContentSize[0])d.height=Math.round(b.maximumContentSize[0]/d.width*d.height),d.width=b.maximumContentSize[0];d.handler.postLoad(d)}a==i&&V()}function Q(b){b?a("object:visible").add("embed").each(function(a,b){M[a]=[b,b.style.visibility];
b.style.visibility="hidden"}):(a.each(M,function(a,b){b[0].style.visibility=b[1]}),M=[]);b=b?"bind":"unbind";a(document)[b]("keydown",Y);if(a.fn.mousewheel)a(window)[b]("mousewheel",Z);a(h)[b]("mousedown",$)[b]("mousemove",R)[b]("mouseup",H);a(window)[b]("mousemove",R)[b]("mouseup",H)}function Y(c){var c=c.keyCode,d=a.inArray;return 0<=d(c,b.closeKeys)?J():0<=d(c,b.nextKeys)&&!b.noNavigation?w():0<=d(c,b.previousKeys)&&!b.noNavigation?v():!b.preventOtherKeys}function Z(a,d){return 0<d&&!b.noNavigation?
v():0>d&&!b.noNavigation?w():!1}function $(c){return b.dragDrop?(A=!0,a(h).css({cursor:"pointer"}),S=c.pageX-a(this).position().left,T=c.pageY-a(this).position().top,!1):!0}function R(c){if(b.dragDrop&&A){var d=c.pageX-a(window).scrollLeft()-S,c=c.pageY-a(window).scrollTop()-T;a(h).css({left:d+"px",top:c+"px"});return!1}return!0}function H(){A&&(A=!1,a(h).css({cursor:""}));return!0}var N={loop:!1,preloadNext:!0,dragDrop:!0,hideBottom:!1,hideCaption:!1,hideButtons:!1,noNavigation:!1,noClose:!1,overlayOpacity:0.8,
resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initCenterSize:[250,250],errorSize:[320,180],defaultContentSize:[960,720],maximumContentSize:[1280,720],captionFadeDuration:200,slideshow:0,autoClose:0,counterText:"{x} of {y}",closeKeys:[27],previousKeys:[37],nextKeys:[39],preventOtherKeys:!0},z=[],b,e,i=-1,k,g,l,M=[],r,s,A=!1,S=0,T=0,q=!1,m=!0,f=null,u=null,I,h,j,F,x,y,K,U,t,n,o,E;a(function(){a("body").append(a([I=a('<div id="easyOverlay" />').click(J)[0],h=a('<div id="easyCenter" />').append([j=
a('<div id="easyContainer" />')[0],E=a('<div id="easyLoadingIndicator" />')[0],t=a('<div id="easyBottom" />').append([F=a('<div id="easyNavigation" />').append([x=a('<a id="easyPrevLink" href="#" />').click(v)[0],y=a('<a id="easyNextLink" href="#" />').click(w)[0]])[0],U=a('<a id="easyCloseLink" href="#" />').click(J)[0],K=a('<a id="easySlideLink" href="#" />').click(X)[0],n=a('<div id="easyCaption" />')[0],o=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display",
"none"))});a.fn.easybox=function(b,d,e,h){var d=d||function(a){var b={url:a.href,caption:a.title};if(a.hasAttribute("data-width"))b.width=a.getAttribute("data-width");if(a.hasAttribute("data-height"))b.height=a.getAttribute("data-height");return b},e=e||function(a){return this==a},h=h||function(){return{}},j=this;return j.unbind("click").click(function(){var i=this,k=0,g,f=0,l;g=a.grep(j,function(a,b){return e.call(i,a,b)});for(l=g.length;f<l;++f)g[f]==i&&(k=f),g[f]=d(g[f],f);return a.easybox(g,k,
a.extend({},b,h(i)))})};a.easybox=function(c,d,f){if(q)return!1;b=a.extend({},N,f);var f=0,g;e=[];for(g=c.length;f<g;++f)e.push(a.extend({caption:"",width:0,height:0},c[f],{handler:null,loaded:!1,loading:!1,error:!1,obj:null}));if(e.length)return q=!0,b.loop=b.loop&&1<e.length,b.slideshow=b.slideshow&&1<e.length?b.slideshow:0,a(K).css({display:b.slideshow&&1<e.length&&!b.hideButtons?"":"none"}),r=s=!1,a(U).css({display:!b.hideButtons?"":"none"}),l=b.initCenterSize.slice(),Q(1),C(),a(h).show(),a(I).css("opacity",
b.overlayOpacity).fadeIn(b.fadeDuration,function(){m=!1;B(Math.min(e.length-1,d||0))}),!1};a.easybox.previous=function(){return 0<=k?!v():!1};a.easybox.next=function(){return 0<=g?!w():!1};a.easybox.close=function(){return q?!G():!1};a.easybox.isOpen=function(){return q};a.easybox.defaults=function(b){N=a.extend(N,b)};a.easybox.resourceHandler=function(b){z.push(a.extend({identify:function(){return!1},preLoad:function(a,b){b()},postLoad:function(){},show:function(){},hide:function(){}},b))};a.easing.easybox=
function(a){return 0.7>a?1.2*Math.pow(a/0.7,2):1.2-0.2*Math.sqrt((a-0.7)/(1-0.7))}})(jQuery);
