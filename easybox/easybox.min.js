/*!
	Easybox v0.1 - Lightweight easy to use lightbox clone for jQuery
	Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>

	Copyright (C) 2011 by Vincent Wochnik

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:
*/
if (!/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)) {	jQuery(function($) {$("a[rel^='lightbox']").easybox({
/* Put custom options here */
}, null, function(el) {return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));});});}

(function(a){function E(b){b?a("object").add("embed").each(function(a,b){A[a]=[b,b.style.visibility];b.style.visibility="hidden"}):(a.each(A,function(a,b){b[0].style.visibility=b[1]}),A=[]);a(document)[b?"bind":"unbind"]("keydown",K)}function K(c){var c=c.keyCode,d=a.inArray;return d(c,b.closeKeys)>=0?F():d(c,b.nextKeys)>=0?G():d(c,b.previousKeys)>=0?H():!1}function H(){return B(l)}function G(){return B(m)}function B(c){if(c>=0){f=c;l=(f||(b.loop?e.length:0))-1;m=(f+1)%e.length||(b.loop?0:-1);I();
if(l>=0&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[l][0]))(new Image).src=e[l][0];if(m>=0&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[m][0]))(new Image).src=e[m][0];/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[f][0])?(a(g).addClass("easyLoading"),k=new Image,k.onload=function(){t=this.width;u=this.height;n()},k.onerror=function(){o=!0;n()},k.src=e[f][0]):(r=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9]*)(&(.*))?/i.exec(e[f][0]))!=null?(a(g).addClass("easyLoading"),q=a.ajax("http://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc",
{type:"GET",data:{q:r[1]},dataType:"jsonp",timeout:2E3,success:function(a){a.data.totalItems&&(a.data.items[0].accessControl.embed=="allowed"?C=a.data.items[0].aspectRatio=="widescreen":o=!0);n()},error:function(a,b){b!="abort"&&(o=!0,n())}})):(r=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?/i.exec(e[f][0]))!=null?(a(g).addClass("easyLoading"),q=a.ajax("http://vimeo.com/api/v2/video/"+r[1]+".json",{type:"GET",dataType:"jsonp",timeout:2E3,success:function(a){a.length&&(a[0].embed_privacy=="anywhere"||a[0].embed_privacy==
"approved"?(v=a[0].width||0,w=a[0].height||0):o=!0);n()},error:function(a,b){b!="abort"&&(o=!0,n())}})):n()}return!1}function n(){var c=0,d=0;a(g).removeClass();o?(a(g).addClass("easyError"),h=b.initialWidth,i=b.initialHeight,a(D).html("")):(/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[f][0])?(c=t>0?t:b.contentWidth,d=u>0?u:b.contentHeight,a('<img src="'+e[f][0]+'" width="'+c+'" height="'+d+'" alt="'+e[f][1]+'" />').appendTo(j)):(r=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9]*)(&(.*))?/i.exec(e[f][0]))!=
null?(d=b.ytPlayerHeight,c=C?Math.round(d*16/9):Math.round(d*4/3),a('<object style="width:'+c+"px;height:"+d+'px" width="'+c+'" height="'+d+'"><param name="movie" value="http://www.youtube.com/v/'+r[1]+'?version=3&autohide=1&autoplay=1&rel=0"></param><param name="AllowFullscreen" value="true"></param><param name="AllowScriptAccess" value="always"></param></param><embed src="http://www.youtube.com/v/'+r[1]+'?version=3&autohide=1&autoplay=1&rel=0" width="'+c+'" height="'+d+'" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true"></embed></object>').appendTo(j)):
(r=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?/i.exec(e[f][0]))!=null?(c=v>0?v:b.contentWidth,d=w>0?w:b.contentHeight,a('<iframe src="http://player.vimeo.com/video/'+r[1]+'?title=0&byline=0&portrait=0&autoplay=true" width="'+c+'" height="'+d+'" frameborder="0"></iframe>').appendTo(j)):(c=b.contentWidth,d=b.contentHeight,a('<iframe width="'+c+'" height="'+d+'" src="'+e[f][0]+'"></iframe>').appendTo(j)),a(j).css({visibility:"hidden",display:""}).width(c).height(d),h=j.offsetWidth,i=j.offsetHeight,a(D).html(e[f][1]||
""));a(J).html((e.length>1&&b.counterText||"").replace(/{x}/,f+1).replace(/{y}/,e.length));(g.offsetHeight!=i||g.offsetWidth!=h)&&a(g).animate({height:i,marginTop:-i/2,width:h,marginLeft:-h/2},b.resizeDuration,b.resizeEasing);a(g).queue(function(){a(x).css({width:h,marginLeft:-h/2,marginTop:i/2});a(p).css({marginLeft:-h/2-Math.floor(a(p).width()*1.5)});a(s).css({marginLeft:h/2+Math.ceil(a(p).width()*0.5)});a(j).css({display:"none",visibility:"",opacity:""}).fadeIn(b.fadeDuration,L)})}function L(){l>=
0&&a(p).css({display:"none",visibility:"",opacity:""}).fadeIn(b.captionAnimationDuration);m>=0&&a(s).css({display:"none",visibility:"",opacity:""}).fadeIn(b.captionAnimationDuration);a(x).css({visibility:"",display:""});a(y).css("marginTop",-y.offsetHeight).animate({marginTop:0},b.captionAnimationDuration)}function I(){var c;a(g).removeClass();if(k!=null)c=k.onload=k.onerror=null,k=c;q!=null&&(q.abort(),q=null);C=o=!1;v=w=t=u=0;a(j).empty();a([g,j,y,p,s]).stop(!0);a([j,x,p,s]).css({display:"none",
visibility:"hidden"})}function F(){f>=0&&(I(),f=l=m=-1,a(z).stop().fadeOut(b.fadeDuration,E),a(g).animate({height:b.closeHeight,marginTop:-b.closeHeight/2,width:b.closeWidth,marginLeft:-b.closeWidth/2,opacity:0},b.fadeDuration,b.resizeEasing,function(){a(g).hide()}));return!1}var b,e,f=-1,l,m,h,i,A=[],k=null,q=null,t=0,u=0,v=0,w=0,C=0,o=!1,z,g,j,p,s,x,y,D,J;a(function(){a("body").append(a([z=a('<div id="easyOverlay" />')[0],g=a('<div id="easyCenter" />').append([j=a('<div id="easyContainer" />')[0]])[0],
p=a('<a id="easyPrevLink" href="#" />').click(H)[0],s=a('<a id="easyNextLink" href="#" />').click(G)[0],x=a('<div id="easyBottomContainer" />').append([y=a('<div id="easyBottom" />').append([a('<a id="easyCloseLink" href="#" />').add(z).click(F)[0],D=a('<div id="easyCaption" />')[0],J=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"))});a.easybox=function(c,d,j){if(f>=0)return!1;b=a.extend({loop:!1,overlayOpacity:0.8,resizeDuration:400,fadeDuration:400,
resizeEasing:"swing",initialWidth:250,initialHeight:250,closeWidth:128,closeHeight:128,contentWidth:640,contentHeight:480,ytPlayerHeight:360,captionAnimationDuration:400,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},j);typeof c=="string"&&(c=[[c,d]],d=0);e=c;b.loop=b.loop&&e.length>1;h=b.initialWidth;i=b.initialHeight;a(g).css({width:h,height:i,marginLeft:-h/2,marginTop:-i/2,opacity:""});E(1);a(g).show();a(z).css("opacity",b.overlayOpacity).fadeIn(b.fadeDuration,
function(){B(d)});return!1};a.fn.easybox=function(b,d,e){var d=d||function(a){return[a.href,a.title]},e=e||function(){return!0},f=this;return f.unbind("click").click(function(){var g=this,j=0,h,i=0,k;h=a.grep(f,function(a,b){return e.call(g,a,b)});for(k=h.length;i<k;++i)h[i]==g&&(j=i),h[i]=d(h[i],i);return a.easybox(h,j,b)})}})(jQuery);
