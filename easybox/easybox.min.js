/*
        Easybox v1.4 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
(function(v,P,b){function A(a){if(q||0>a||a>=d.length)return!1;B();e=a;k=(e||(c.loop?d.length:0))-1;f=(e+1)%d.length||(c.loop?0:-1);c.preloadNext&&(0<=k&&C(d[k]),0<=f&&C(d[f]));d[e].loaded||b(w).show();C(d[e]);return!1}function Z(){var a=d[e];b(w).hide();a.error?b(i).addClass("error").width(c.errorSize[0]).height(c.errorSize[1]):(!c.hideCaption&&a.caption.length&&b(l).html(a.caption).css({display:""}),b(i).width(a.width).height(a.height));!c.hideCaption&&1<d.length&&c.counterText.length&&b(m).html(c.counterText.replace(/{x}/,
e+1).replace(/{y}/,d.length)).css({display:""});q=!0;b(i).css({visibility:"hidden",display:""});Q([i.offsetWidth,i.offsetHeight],-1,c.resizeDuration);b(g).queue(function(j){b(i).css({visibility:"",display:"none"});a.error||(b(a.obj).appendTo(i),a.handler.show(a),D=!0);R();b(i).fadeIn(c.fadeDuration,$);q=!1;j()})}function Q(a,j,aa){h=a.slice();var d={};if(g.offsetHeight!=a[1]||g.offsetWidth!=a[0])d={height:a[1],marginTop:-a[1]/2,width:a[0],marginLeft:-a[0]/2};if(-1<j)d.opacity=j;b(g).animate(d,aa,
c.resizeEasing)}function $(){if(!c.hideBottom){if((0<=k||0<=f)&&!c.noNavigation&&!c.hideButtons)b(E).css({display:""}),b([l,m]).addClass("nav"),0>k&&b(F).addClass("disabled"),0>f&&b(G).addClass("disabled");b(x).fadeIn(c.captionFadeDuration);b(g).animate({height:h[1]+x.offsetHeight},c.captionFadeDuration,c.resizeEasing)}}function B(){S();if(0<=e){var a=d[e];!a.error&&D&&a.handler.hide(a)}b([i,l,m]).html("");b(w).hide();b([x,i]).stop(!0,!0).hide();b(g).stop(!0).css({width:h[0],height:h[1],marginLeft:-h[0]/
2,marginTop:-h[1]/2,opacity:""});b([E,l,m]).hide();b([i,l,m,F,G]).removeClass();D=q=!1}function H(){if(!n)return!1;B();e=k=f=-1;I();T(0);for(var a=0;a<d.length;++a){var j=d[a];!j.loaded&&j.loading&&j.handler.abort(j)}b(J).stop().fadeOut(c.fadeDuration);Q([h[0]/2,h[1]/2],0,c.fadeDuration);b(g).queue(function(a){b(g).css({left:"",top:""}).hide();n=!1;a()});return!1}function r(){s=!0;return A(k)}function t(){s=!1;return A(f)}function K(){return q||c.noClose?!1:H()}function U(){if(c.noToggleSlideshow)return!1;
o=!o;s=!1;b(L).toggleClass("disabled",o);o?S():R();return!1}function R(){if(!o){if(c.slideshow&&null==p)if(s){if(0<=k)return p=setTimeout(r,c.slideshow),!1}else if(0<=f)return p=setTimeout(t,c.slideshow),!1;c.autoClose&&null==u&&(u=setTimeout(H,c.autoClose))}return!1}function S(){null!=p&&(clearTimeout(p),p=null);null!=u&&(clearTimeout(u),u=null)}function C(a){a.loaded&&M(a);if(!a.loading){a.loading=!0;for(var b=y.length-1;0<=b;--b)if(y[b].identify(a)){a.handler=y[b];a.handler.preLoad(a,function(){M(a)});
return}a.error=!0;M(a)}}function M(a){if(!a.loaded&&(a.loaded=!0,!a.error)){if(!a.width||!a.height)a.width=c.defaultContentSize[0],a.height=c.defaultContentSize[1];if(a.height>c.maximumContentSize[1])a.width=Math.round(c.maximumContentSize[1]*a.width/a.height),a.height=c.maximumContentSize[1];if(a.width>c.maximumContentSize[0])a.height=Math.round(c.maximumContentSize[0]/a.width*a.height),a.width=c.maximumContentSize[0];a.handler.postLoad(a)}d[e]==a&&Z()}function ba(a){y.push(b.extend({identify:function(){return!1},
preLoad:function(a,b){b()},postLoad:function(){},abort:function(){},show:function(){},hide:function(){}},a))}function T(a){a?b("object:visible").add("embed").each(function(a,b){N[a]=[b,b.style.visibility];b.style.visibility="hidden"}):(b.each(N,function(a,b){b[0].style.visibility=b[1]}),N=[]);a=a?"bind":"unbind";b(P)[a]("keydown",ca);if(b.fn.mousewheel)b(v)[a]("mousewheel",da);b(g)[a]("mousedown",ea)[a]("mousemove",V)[a]("mouseup",I);b(v)[a]("mousemove",V)[a]("mouseup",I)}function ca(a){var a=a.keyCode,
j=b.inArray;return 0<=j(a,c.closeKeys)?K():0<=j(a,c.nextKeys)&&!c.noNavigation?t():0<=j(a,c.previousKeys)&&!c.noNavigation?r():0<=j(a,c.toggleSlideshowKeys)&&0<c.slideshow?U():!c.preventOtherKeys}function da(a,b){return 0<b&&!c.noNavigation?r():0>b&&!c.noNavigation?t():!1}function ea(a){return c.dragDrop?(z=!0,b(g).css({cursor:"pointer"}),W=a.pageX-b(this).position().left,X=a.pageY-b(this).position().top,!1):!0}function V(a){if(c.dragDrop&&z){var d=a.pageX-b(v).scrollLeft()-W,a=a.pageY-b(v).scrollTop()-
X;b(g).css({left:d+"px",top:a+"px"});return!1}return!0}function I(){z&&(z=!1,b(g).css({cursor:""}));return!0}var O={loop:!1,preloadNext:!0,dragDrop:!0,hideBottom:!1,hideCaption:!1,hideButtons:!1,noNavigation:!1,noClose:!1,noToggleSlideshow:!1,overlayOpacity:0.8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initCenterSize:[250,250],errorSize:[320,180],defaultContentSize:[960,720],maximumContentSize:[1280,720],captionFadeDuration:200,slideshow:0,autoClose:0,counterText:"{x} of {y}",closeKeys:[27],
previousKeys:[37],nextKeys:[39],toggleSlideshowKeys:[32],preventOtherKeys:!0},y=[],c,d,e=-1,k=-1,f=-1,h,N=[],s,o,z=!1,W=0,X=0,n=!1,q,D,p=null,u=null,J,g,i,E,F,G,L,Y,x,l,m,w;b(function(){b(P.body).append(b([J=b('<div id="easyOverlay" />').click(K)[0],g=b('<div id="easyCenter" />').append([i=b('<div id="easyContainer" />')[0],w=b('<div id="easyLoadingIndicator" />')[0],x=b('<div id="easyBottom" />').append([E=b('<div id="easyNavigation" />').append([F=b('<a id="easyPrevLink" href="#" />').click(r)[0],
G=b('<a id="easyNextLink" href="#" />').click(t)[0]])[0],Y=b('<a id="easyCloseLink" href="#" />').click(K)[0],L=b('<a id="easySlideLink" href="#" />').click(U)[0],l=b('<div id="easyCaption" />')[0],m=b('<div id="easyNumber" />')[0]])[0]])[0]]).css("display","none"))});b.fn.easybox=function(a,c,d,g){var c=c||function(a){var b={url:a.href,caption:a.title};if(a.hasAttribute("data-width"))b.width=a.getAttribute("data-width");if(a.hasAttribute("data-height"))b.height=a.getAttribute("data-height");return b},
d=d||function(a){return this==a},g=g||function(){return{}},i=this;return i.unbind("click").click(function(){var e=this,k=0,f,h=0,l;f=b.grep(i,function(a,b){return d.call(e,a,b)});for(l=f.length;h<l;++h)f[h]==e&&(k=h),f[h]=c(f[h],h);return b.easybox(f,k,b.extend({},a,g(e)))})};var fa=b.easybox=function(a,f,e){if(n)return!1;c=b.extend({},O,e);d=[];for(e=0;e<a.length;e++)d.push(b.extend({caption:"",width:0,height:0},a[e],{handler:null,loaded:!1,loading:!1,error:!1,obj:null}));if(d.length)return n=!0,
1>=d.length&&b.extend(c,{loop:!1,slideshow:0}),b(L).removeClass("disabled").css({display:0<c.slideshow&&!c.hideButtons?"":"none"}),s=o=!1,b(Y).css({display:!c.hideButtons?"":"none"}),h=c.initCenterSize.slice(),B(),T(1),b(g).show(),b(J).css({opacity:c.overlayOpacity}).fadeIn(c.fadeDuration,function(){A(Math.min(d.length-1,f||0))}),!1};b.extend(fa,{previous:function(){return 0<=k?!r():!1},next:function(){return 0<=f?!t():!1},hasPrevious:function(){return 0<=k},hasNext:function(){return 0<=f},close:function(){return n?
!H():!1},isOpen:function(){return n},defaults:function(a){O=b.extend(O,a)},resourceHandler:function(a){ba(a)}});b.easing.easybox=function(a){return 0.7>a?1.2*Math.pow(a/0.7,2):1.2-0.2*Math.sqrt((a-0.7)/(1-0.7))}})(window,document,jQuery);
