/*
        Easybox v1.3 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(b){var c={/* custom options here */};b("a[rel^='lightbox']").easybox(c,null,function(a){return this==a||8<this.rel.length&&this.rel==a.rel});b("a.lightbox").easybox(c,null,function(a){return this==a||-1!=this.className.indexOf("lightbox")&&this.hasAttribute("data-lightbox")&&this.getAttribute("data-lightbox")==a.getAttribute("data-lightbox")})});
(function(a){function V(c){c?a("object:visible").add("embed").each(function(a,c){L[a]=[c,c.style.visibility];c.style.visibility="hidden"}):(a.each(L,function(a,c){c[0].style.visibility=c[1]}),L=[]);c=c?"bind":"unbind";a(document)[c]("keydown",ha);if(a.fn.mousewheel)a(window)[c]("mousewheel",ia);a(e)[c]("mousedown",ja)[c]("mousemove",W)[c]("mouseup",M);a(window)[c]("mousemove",W)[c]("mouseup",M)}function ha(c){var c=c.keyCode,h=a.inArray;return x?!0:0<=h(c,b.closeKeys)?F():0<=h(c,b.nextKeys)&&!b.noNavigation?
G():0<=h(c,b.previousKeys)&&!b.noNavigation?H():!b.preventOtherKeys}function ia(a,h){return x?!0:0<h&&!b.noNavigation?H():0>h&&!b.noNavigation?G():!b.preventOtherKeys}function H(){t=!0;return N(j)}function G(){t=!1;return N(i)}function X(){if(b.slideshow&&!u&&null==l){if(t&&0<=j)return l=setTimeout(H,b.slideshow),!1;if(!t&&0<=i)return l=setTimeout(G,b.slideshow),!1}b.autoClose&&null==y&&(y=setTimeout(Y,b.autoClose));return!1}function N(a){if(0<=a){g=a;j=(g||(b.loop?d.length:0))-1;i=(g+1)%d.length||
(b.loop?0:-1);O();b.busyTimeout&&(I=setTimeout(ka,b.busyTimeout));if(0<=j&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[j][0]))(new Image).src=d[j][0];if(0<=i&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[i][0]))(new Image).src=d[i][0];Z()?la():!1!=(id=$())?aa(0,id):!1!=(id=ba())?aa(1,id):v()}return!1}function v(){var c,h;if(w)a(e).addClass("easyError"),o=b.initWidth,m=b.initHeight,h=null;else{if(Z())c=z({w:A,h:B}),h=a('<img src="'+d[g][0]+'" width="'+c.w+'" height="'+c.h+'" alt="'+d[g][1]+'" />');else if(!1!=
(id=$())){var f="?version=3&autohide=1&autoplay=1&rel=0";if(b.ytPlayerTheme&&null!=(r=/^([a-z]*),([a-z]*)$/.exec(b.ytPlayerTheme)))f+="&theme="+r[1]+"&color="+r[2];b.loopVideos&&(f+="&loop=1&playlist="+id);c=z({w:Math.round(b.ytPlayerHeight*(P?16/9:4/3)),h:b.ytPlayerHeight});h=a('<iframe src="http://www.youtube.com/embed/'+id+f+'" width="'+c.w+'" height="'+c.h+'" frameborder="0"></iframe>')}else!1!=(id=ba())?(f="?title=0&byline=0&portrait=0&autoplay=true",c=z({w:A,h:B}),b.loopVideos&&(f+="&loop=true"),
h=a('<iframe src="http://player.vimeo.com/video/'+id+f+'" width="'+c.w+'" height="'+c.h+'" frameborder="0"></iframe>')):!1!=(id=ma())?(n=a("#"+id)[0],Q=a(n).parent(),R=a(n).css("display"),c=z({w:a(n).width(),h:a(n).height()}),h=a(n)):(c=z({}),h=a('<iframe width="'+c.w+'" height="'+c.h+'" src="'+d[g][0]+'" frameborder="0"></iframe>'));a(k).css({visibility:"hidden",display:""}).width(c.w).height(c.h);o=k.offsetWidth;m=k.offsetHeight;d[g][1].length&&a(C).html(d[g][1]).css({display:""});1<d.length&&b.counterText.length&&
a(D).html(b.counterText.replace(/{x}/,g+1).replace(/{y}/,d.length)).css({display:""})}(e.offsetHeight!=m||e.offsetWidth!=o)&&a(e).animate({height:m,marginTop:-m/2,width:o,marginLeft:-o/2},b.resizeDuration);a(e).queue(function(c){a(k).css({display:"none",visibility:"",opacity:""});null!=h&&a(h).css({display:"block"}).appendTo(k);a(k).fadeIn(b.fadeDuration,na);X();c()})}function na(){x=!1;if(!b.hideBottom){if((0<=j||0<=i)&&!b.noNavigation&&!b.hideButtons)a(S).css({display:""}),a([C,D]).addClass("nav"),
0<=j&&a(q).fadeIn(b.captionFadeDuration),0<=i&&a(s).fadeIn(b.captionFadeDuration);a(E).fadeIn(b.captionFadeDuration);a(e).animate({height:m+E.offsetHeight},b.captionFadeDuration,b.resizeEasing)}}function O(){var c;x=!0;a(e).removeClass();if(null!=p)c=p.onload=p.onerror=null,p=c;null!=J&&(J.abort(),J=null);null!=l&&(clearTimeout(l),l=null);null!=I&&(clearTimeout(I),I=null);null!=y&&(clearTimeout(y),y=null);null!=n&&(a(Q).append(a(n).css({display:R})),n=Q=R=null);P=w=!1;A=B=0;a(k).empty();a([e,E,k,
q,s]).stop(!0);a(e).css({width:o,height:m,marginLeft:-o/2,marginTop:-m/2,opacity:""});a([S,C,D,k,E,q,s]).css({display:"none",opacity:""});a([C,D]).removeClass().html("").css({display:b.hideCaption?"none":""})}function oa(){u=!u;t=!1;a(T).toggleClass("disabled",u);u?null!=l&&(clearTimeout(l),l=null):X();return!1}function F(c){if(!(b.noClose&&1!=c))return 0<=g&&(O(),g=j=i=-1,t=u=!1,a(U).stop().fadeOut(b.fadeDuration,V),a(e).animate({height:b.closeHeight,marginTop:-b.closeHeight/2,width:b.closeWidth,
marginLeft:-b.closeWidth/2,opacity:0},b.fadeDuration,function(){M();a([e,q,s]).css({left:"",top:""});a(e).hide()})),!1}function Y(){F(1)}function ka(){x=!1}function Z(){return/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[g][0])}function $(){var a=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(d[g][0]);return null!=a?a[1]:!1}function ba(){var a=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(d[g][0]);return null!=a?a[1]:!1}function ma(){var c=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(d[g][0]);
return null!=c&&a("#"+c[2]).length?c[2]:!1}function la(){a(e).addClass("easyLoading");p=new Image;p.onload=function(){A=this.width;B=this.height;a(e).removeClass("easyLoading");v()};p.onerror=function(){w=!0;v()};p.src=d[g][0]}function aa(c,b){var f,d;a(e).addClass("easyLoading");d={type:"GET",dataType:"jsonp",timeout:2E3,error:function(c,b){"abort"!=b&&(w=!0,a(e).removeClass("easyLoading"),v())}};if(0==c)f="http://gdata.youtube.com/feeds/api/videos/"+b+"?v=2&alt=jsonc",d.success=function(c){!c.error&&
c.data&&"allowed"==c.data.accessControl.embed?P="widescreen"==c.data.aspectRatio:w=!0;a(e).removeClass("easyLoading");v()};else if(1==c)f="http://vimeo.com/api/v2/video/"+b+".json",d.success=function(c){c.length&&("anywhere"==c[0].embed_privacy||"approved"==c[0].embed_privacy?(A=c[0].width||0,B=c[0].height||0):w=!0);a(e).removeClass("easyLoading");v()};J=a.ajax(f,d)}function z(a){if(!(0<a.w&&0<a.h))a.w=b.defWidth,a.h=b.defHeight;if(a.h>b.maxHeight)a.w=Math.round(b.maxHeight*a.w/a.h),a.h=b.maxHeight;
if(a.w>b.maxWidth)a.h=Math.round(b.maxWidth/a.w*a.h),a.w=b.maxWidth;return a}function ja(c){return b.dragDrop?(K=!0,a([e,q,s]).css({cursor:"pointer"}),da=c.pageX-a(this).position().left,ea=c.pageY-a(this).position().top,!1):!0}function W(c){if(b.dragDrop&&K){var d=c.pageX-a(window).scrollLeft()-da,c=c.pageY-a(window).scrollTop()-ea;a(e).css({left:d+"px",top:c+"px"});return!1}return!0}function M(){return K?(K=!1,a([e,q,s]).css({cursor:""}),!1):!0}var fa,b,d,g=-1,j,i,o,m,L=[],t=!1,u=!1,K=!1,da=0,ea=
0,x=!1,p=null,J=null,n=null,Q=null,R=null,I=null,l=null,y=null,A=0,B=0,P=0,w=!1,U,e,k,S,q,s,T,ga,E,C,D;a(function(){fa={loop:!1,loopVideos:!1,dynOpts:!0,dragDrop:!0,hideBottom:!1,hideCaption:!1,hideButtons:!1,noNavigation:!1,noClose:!1,overlayOpacity:0.8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initWidth:250,initHeight:250,defWidth:960,defHeight:720,closeWidth:128,closeHeight:128,maxWidth:1280,maxHeight:720,maxScreenFill:0.7,ytPlayerHeight:480,ytPlayerTheme:"light,white",captionFadeDuration:200,
slideshow:0,autoClose:0,busyTimeout:800,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],preventOtherKeys:!0};a("body").append(a([U=a('<div id="easyOverlay" />').click(F)[0],e=a('<div id="easyCenter" />').append([k=a('<div id="easyContainer" />')[0],E=a('<div id="easyBottom" />').append([S=a('<div id="easyNavigation" />').append([q=a('<a id="easyPrevLink" href="#" />').click(H)[0],s=a('<a id="easyNextLink" href="#" />').click(G)[0]])[0],ga=a('<a id="easyCloseLink" href="#" />').click(F)[0],
T=a('<a id="easySlideLink" href="#" />').click(oa)[0],C=a('<div id="easyCaption" />')[0],D=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"))});a.easybox=function(c,h,f,k){if(0<=g)return!1;b=a.extend({},fa,f);b.dynOpts&&a("#easyOptions").length&&(f=a.parseJSON(a("#easyOptions").html()),a.each(f,function(c,d){if("global"==c||"string"==typeof k&&c==k)b=a.extend(b,d)}));if("string"==typeof c)d=[[c,h||""]],h=0;else{var f=0,ca;d=[];for(ca=c.length;f<
ca;++f)"string"==typeof c[f]?d.push([c[f],""]):d.push([c[f][0],c[f][1]||""]);h=h||0}if(b.maxScreenFill)b.maxWidth=Math.min(Math.round(screen.width*b.maxScreenFill),b.maxWidth),b.maxHeight=Math.min(Math.round(screen.height*b.maxScreenFill),b.maxHeight);b.loop=b.loop&&1<d.length;b.slideshow=b.slideshow&&1<d.length?b.slideshow:0;a(T).css({display:b.slideshow&&1<d.length&&!b.hideButtons?"":"none"});a(ga).css({display:!b.hideButtons?"":"none"});o=b.initWidth;m=b.initHeight;V(1);O();a(e).show();a(U).css("opacity",
b.overlayOpacity).fadeIn(b.fadeDuration,function(){N(h)});return!1};a.easybox.close=Y;a.easybox.isOpen=function(){return 0<=g};a.fn.easybox=function(c,b,d){var b=b||function(a){return[a.href,a.title]},d=d||function(a){return this==a},e=this;return e.unbind("click").click(function(){var g=this,k=0,j,i=0,l;j=a.grep(e,function(a,b){return d.call(g,a,b)});for(l=j.length;i<l;++i)j[i]==g&&(k=i),j[i]=b(j[i],i);return a.easybox(j,k,c,a(g).attr("rel")||null)})};a.easing.easybox=function(a){return 0.7>a?1.2*
Math.pow(a/0.7,2):1.2-0.2*Math.sqrt((a-0.7)/(1-0.7))}})(jQuery);
