/*
        Easybox v1.3 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(b){var c={/* custom options here */};b("a[rel^='lightbox']").easybox(c,null,function(a){return this==a||8<this.rel.length&&this.rel==a.rel});b("a.lightbox").easybox(c,null,function(a){return this==a||-1!=this.className.indexOf("lightbox")&&this.hasAttribute("data-lightbox")&&this.getAttribute("data-lightbox")==a.getAttribute("data-lightbox")})});
(function(a){function X(c){c?a("object:visible").add("embed").each(function(a,c){M[a]=[c,c.style.visibility];c.style.visibility="hidden"}):(a.each(M,function(a,c){c[0].style.visibility=c[1]}),M=[]);c=c?"bind":"unbind";a(document)[c]("keydown",ja);if(a.fn.mousewheel)a(window)[c]("mousewheel",ka);a(h)[c]("mousedown",la)[c]("mousemove",Y)[c]("mouseup",N);a(window)[c]("mousemove",Y)[c]("mouseup",N)}function ja(c){var c=c.keyCode,f=a.inArray;return x?!0:0<=f(c,b.closeKeys)?G():0<=f(c,b.nextKeys)&&!b.noNavigation?
H():0<=f(c,b.previousKeys)&&!b.noNavigation?I():!b.preventOtherKeys}function ka(a,f){return x?!0:0<f&&!b.noNavigation?I():0>f&&!b.noNavigation?H():!b.preventOtherKeys}function I(){t=!0;return O(j)}function H(){t=!1;return O(i)}function Z(){if(b.slideshow&&!u&&null==l){if(t&&0<=j)return l=setTimeout(I,b.slideshow),!1;if(!t&&0<=i)return l=setTimeout(H,b.slideshow),!1}b.autoClose&&null==y&&(y=setTimeout($,b.autoClose));return!1}function O(a){if(0<=a){g=a;j=(g||(b.loop?d.length:0))-1;i=(g+1)%d.length||
(b.loop?0:-1);P();b.busyTimeout&&(J=setTimeout(ma,b.busyTimeout));if(0<=j&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[j][0]))(new Image).src=d[j][0];if(0<=i&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[i][0]))(new Image).src=d[i][0];aa()?na():!1!=(id=ba())?ca(0,id):!1!=(id=da())?ca(1,id):v()}return!1}function v(){var c,f;a(z).hide();if(w)a(Q).show(),f=null;else{if(aa())c=A({w:B,h:C}),f=a('<img src="'+d[g][0]+'" width="'+c.w+'" height="'+c.h+'" alt="'+d[g][1]+'" />');else if(!1!=(id=ba())){var e="?version=3&autohide=1&autoplay=1&rel=0";
if(b.ytPlayerTheme&&null!=(r=/^([a-z]*),([a-z]*)$/.exec(b.ytPlayerTheme)))e+="&theme="+r[1]+"&color="+r[2];b.loopVideos&&(e+="&loop=1&playlist="+id);c=A({w:Math.round(b.ytPlayerHeight*(R?16/9:4/3)),h:b.ytPlayerHeight});f=a('<iframe src="http://www.youtube.com/embed/'+id+e+'" width="'+c.w+'" height="'+c.h+'" frameborder="0"></iframe>')}else!1!=(id=da())?(e="?title=0&byline=0&portrait=0&autoplay=true",c=A({w:B,h:C}),b.loopVideos&&(e+="&loop=true"),f=a('<iframe src="http://player.vimeo.com/video/'+id+
e+'" width="'+c.w+'" height="'+c.h+'" frameborder="0"></iframe>')):!1!=(id=oa())?(m=a("#"+id)[0],S=a(m).parent(),T=a(m).css("display"),c=A({w:a(m).width(),h:a(m).height()}),f=a(m)):(c=A({}),f=a('<iframe width="'+c.w+'" height="'+c.h+'" src="'+d[g][0]+'" frameborder="0"></iframe>'));a(k).css({visibility:"hidden",display:""}).width(c.w).height(c.h);o=k.offsetWidth;n=k.offsetHeight;d[g][1].length&&a(D).html(d[g][1]).css({display:""});1<d.length&&b.counterText.length&&a(E).html(b.counterText.replace(/{x}/,
g+1).replace(/{y}/,d.length)).css({display:""})}(h.offsetHeight!=n||h.offsetWidth!=o)&&a(h).animate({height:n,marginTop:-n/2,width:o,marginLeft:-o/2},b.resizeDuration);a(h).queue(function(c){a(k).css({display:"none",visibility:"",opacity:""});null!=f&&a(f).css({display:"block"}).appendTo(k);a(k).fadeIn(b.fadeDuration,pa);Z();c()})}function pa(){x=!1;if(!b.hideBottom){if((0<=j||0<=i)&&!b.noNavigation&&!b.hideButtons)a(U).css({display:""}),a([D,E]).addClass("nav"),0<=j&&a(q).fadeIn(b.captionFadeDuration),
0<=i&&a(s).fadeIn(b.captionFadeDuration);a(F).fadeIn(b.captionFadeDuration);a(h).animate({height:n+F.offsetHeight},b.captionFadeDuration,b.resizeEasing)}}function P(){var c;x=!0;if(null!=p)c=p.onload=p.onerror=null,p=c;null!=K&&(K.abort(),K=null);null!=l&&(clearTimeout(l),l=null);null!=J&&(clearTimeout(J),J=null);null!=y&&(clearTimeout(y),y=null);null!=m&&(a(S).append(a(m).css({display:T})),m=S=T=null);R=w=!1;B=C=0;a(k).empty();a([h,F,k,q,s]).stop(!0);a(h).css({width:o,height:n,marginLeft:-o/2,marginTop:-n/
2,opacity:""});a([U,D,E,k,F,q,s]).css({display:"none",opacity:""});a([D,E]).removeClass().html("").css({display:b.hideCaption?"none":""});a([z,Q]).css({left:o/2,top:n/2}).hide()}function qa(){u=!u;t=!1;a(V).toggleClass("disabled",u);u?null!=l&&(clearTimeout(l),l=null):Z();return!1}function G(c){if(!(b.noClose&&1!=c))return 0<=g&&(P(),g=j=i=-1,t=u=!1,a(W).stop().fadeOut(b.fadeDuration,X),a(h).animate({height:b.closeHeight,marginTop:-b.closeHeight/2,width:b.closeWidth,marginLeft:-b.closeWidth/2,opacity:0},
b.fadeDuration,function(){N();a([h,q,s]).css({left:"",top:""});a(h).hide()})),!1}function $(){G(1)}function ma(){x=!1}function aa(){return/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[g][0])}function ba(){var a=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(d[g][0]);return null!=a?a[1]:!1}function da(){var a=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(d[g][0]);return null!=a?a[1]:!1}function oa(){var c=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(d[g][0]);return null!=c&&a("#"+c[2]).length?
c[2]:!1}function na(){a(z).show();p=new Image;p.onload=function(){B=this.width;C=this.height;v()};p.onerror=function(){w=!0;v()};p.src=d[g][0]}function ca(c,b){var e,d;a(z).show();d={type:"GET",dataType:"jsonp",timeout:2E3,error:function(a,c){"abort"!=c&&(w=!0,v())}};if(0==c)e="http://gdata.youtube.com/feeds/api/videos/"+b+"?v=2&alt=jsonc",d.success=function(a){!a.error&&a.data&&"allowed"==a.data.accessControl.embed?R="widescreen"==a.data.aspectRatio:w=!0;v()};else if(1==c)e="http://vimeo.com/api/v2/video/"+
b+".json",d.success=function(a){a.length&&("anywhere"==a[0].embed_privacy||"approved"==a[0].embed_privacy?(B=a[0].width||0,C=a[0].height||0):w=!0);v()};K=a.ajax(e,d)}function A(a){if(!(0<a.w&&0<a.h))a.w=b.defWidth,a.h=b.defHeight;if(a.h>b.maxHeight)a.w=Math.round(b.maxHeight*a.w/a.h),a.h=b.maxHeight;if(a.w>b.maxWidth)a.h=Math.round(b.maxWidth/a.w*a.h),a.w=b.maxWidth;return a}function la(c){return b.dragDrop?(L=!0,a([h,q,s]).css({cursor:"pointer"}),fa=c.pageX-a(this).position().left,ga=c.pageY-a(this).position().top,
!1):!0}function Y(c){if(b.dragDrop&&L){var d=c.pageX-a(window).scrollLeft()-fa,c=c.pageY-a(window).scrollTop()-ga;a(h).css({left:d+"px",top:c+"px"});return!1}return!0}function N(){return L?(L=!1,a([h,q,s]).css({cursor:""}),!1):!0}var ha,b,d,g=-1,j,i,o,n,M=[],t=!1,u=!1,L=!1,fa=0,ga=0,x=!1,p=null,K=null,m=null,S=null,T=null,J=null,l=null,y=null,B=0,C=0,R=0,w=!1,W,h,k,U,q,s,V,ia,F,D,E,z,Q;a(function(){ha={loop:!1,loopVideos:!1,dynOpts:!0,dragDrop:!0,hideBottom:!1,hideCaption:!1,hideButtons:!1,noNavigation:!1,
noClose:!1,overlayOpacity:0.8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initWidth:250,initHeight:250,defWidth:960,defHeight:720,closeWidth:128,closeHeight:128,maxWidth:1280,maxHeight:720,maxScreenFill:0.7,ytPlayerHeight:480,ytPlayerTheme:"light,white",captionFadeDuration:200,slideshow:0,autoClose:0,busyTimeout:800,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],preventOtherKeys:!0};a("body").append(a([W=a('<div id="easyOverlay" />').click(G)[0],
h=a('<div id="easyCenter" />').append([k=a('<div id="easyContainer" />')[0],z=a('<div id="easyLoadingIndicator" />')[0],Q=a('<div id="easyErrorIndicator" />')[0],F=a('<div id="easyBottom" />').append([U=a('<div id="easyNavigation" />').append([q=a('<a id="easyPrevLink" href="#" />').click(I)[0],s=a('<a id="easyNextLink" href="#" />').click(H)[0]])[0],ia=a('<a id="easyCloseLink" href="#" />').click(G)[0],V=a('<a id="easySlideLink" href="#" />').click(qa)[0],D=a('<div id="easyCaption" />')[0],E=a('<div id="easyNumber" />')[0],
a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"))});a.easybox=function(c,f,e,k){if(0<=g)return!1;b=a.extend({},ha,e);b.dynOpts&&a("#easyOptions").length&&(e=a.parseJSON(a("#easyOptions").html()),a.each(e,function(c,d){if("global"==c||"string"==typeof k&&c==k)b=a.extend(b,d)}));if("string"==typeof c)d=[[c,f||""]],f=0;else{var e=0,ea;d=[];for(ea=c.length;e<ea;++e)"string"==typeof c[e]?d.push([c[e],""]):d.push([c[e][0],c[e][1]||""]);f=f||0}if(b.maxScreenFill)b.maxWidth=Math.min(Math.round(screen.width*
b.maxScreenFill),b.maxWidth),b.maxHeight=Math.min(Math.round(screen.height*b.maxScreenFill),b.maxHeight);b.loop=b.loop&&1<d.length;b.slideshow=b.slideshow&&1<d.length?b.slideshow:0;a(V).css({display:b.slideshow&&1<d.length&&!b.hideButtons?"":"none"});a(ia).css({display:!b.hideButtons?"":"none"});o=b.initWidth;n=b.initHeight;X(1);P();a(h).show();a(W).css("opacity",b.overlayOpacity).fadeIn(b.fadeDuration,function(){O(f)});return!1};a.easybox.close=$;a.easybox.isOpen=function(){return 0<=g};a.fn.easybox=
function(b,d,e){var d=d||function(a){return[a.href,a.title]},e=e||function(a){return this==a},g=this;return g.unbind("click").click(function(){var h=this,k=0,j,i=0,l;j=a.grep(g,function(a,b){return e.call(h,a,b)});for(l=j.length;i<l;++i)j[i]==h&&(k=i),j[i]=d(j[i],i);return a.easybox(j,k,b,a(h).attr("rel")||null)})};a.easing.easybox=function(a){return 0.7>a?1.2*Math.pow(a/0.7,2):1.2-0.2*Math.sqrt((a-0.7)/(1-0.7))}})(jQuery);
