/*
        Easybox v1.2 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(b){var c={/* custom options here */};b("a[rel^='lightbox']").easybox(c,null,function(a){return this==a||8<this.rel.length&&this.rel==a.rel});b("a.lightbox").easybox(c,null,function(a){return this==a||-1!=this.className.indexOf("lightbox")&&this.hasAttribute("data-lightbox")&&this.getAttribute("data-lightbox")==a.getAttribute("data-lightbox")})});
(function(a){function W(c){c?a("object:visible").add("embed").each(function(a,c){M[a]=[c,c.style.visibility];c.style.visibility="hidden"}):(a.each(M,function(a,c){c[0].style.visibility=c[1]}),M=[]);c=c?"bind":"unbind";a(document)[c]("keydown",ia);if(a.fn.mousewheel)a(window)[c]("mousewheel",ja)}function ia(c){var c=c.keyCode,g=a.inArray;return A?!0:0<=g(c,b.closeKeys)?F():0<=g(c,b.nextKeys)&&!b.noNavigation?G():0<=g(c,b.previousKeys)&&!b.noNavigation?H():!b.preventOtherKeys}function ja(a,g){return A?
!0:0<g&&!b.noNavigation?H():0>g&&!b.noNavigation?G():!b.preventOtherKeys}function H(){s=!0;return N(i)}function G(){s=!1;return N(l)}function X(){if(b.slideshow&&!t&&null==m){if(s&&0<=i)return m=setTimeout(H,b.slideshow),!1;if(!s&&0<=l)return m=setTimeout(G,b.slideshow),!1}b.autoClose&&null==B&&(B=setTimeout(Y,b.autoClose));return!1}function N(a){0<=a&&(h=a,i=(h||(b.loop?d.length:0))-1,l=(h+1)%d.length||(b.loop?0:-1),O(),b.busyTimeout&&(I=setTimeout(ka,b.busyTimeout)),0<=i&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[i][0])&&
((new Image).src=d[i][0]),0<=l&&/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[l][0])&&((new Image).src=d[l][0]),Z()?la():!1!=(id=$())?aa(0,id):!1!=(id=ba())?aa(1,id):u());return!1}function u(){var c,g;if(v)a(f).addClass("easyError"),j=b.initWidth,n=b.initHeight,g=null;else{if(Z())c=C({w:D,h:E}),g=a('<img src="'+d[h][0]+'" width="'+c.w+'" height="'+c.h+'" alt="'+d[h][1]+'" />');else if(!1!=(id=$())){var e="?version=3&autohide=1&autoplay=1&rel=0";if(b.ytPlayerTheme&&null!=(r=/^([a-z]*),([a-z]*)$/.exec(b.ytPlayerTheme)))e+=
"&theme="+r[1]+"&color="+r[2];b.loopVideos&&(e+="&loop=1&playlist="+id);c=C({w:Math.round(b.ytPlayerHeight*(P?16/9:4/3)),h:b.ytPlayerHeight});g=a('<iframe src="http://www.youtube.com/embed/'+id+e+'" width="'+c.w+'" height="'+c.h+'" frameborder="0"></iframe>')}else!1!=(id=ba())?(e="?title=0&byline=0&portrait=0&autoplay=true",c=C({w:D,h:E}),b.loopVideos&&(e+="&loop=true"),g=a('<iframe src="http://player.vimeo.com/video/'+id+e+'" width="'+c.w+'" height="'+c.h+'" frameborder="0"></iframe>')):!1!=(id=
ma())?(o=a("#"+id)[0],Q=a(o).parent(),R=a(o).css("display"),c=C({w:a(o).width(),h:a(o).height()}),g=a(o)):(c=C({}),g=a('<iframe width="'+c.w+'" height="'+c.h+'" src="'+d[h][0]+'" frameborder="0"></iframe>'));a(p).css({visibility:"hidden",display:""}).width(c.w).height(c.h);j=p.offsetWidth;n=p.offsetHeight;d[h][1].length&&a(w).html(d[h][1]).css({display:""});1<d.length&&b.counterText.length&&a(x).html(b.counterText.replace(/{x}/,h+1).replace(/{y}/,d.length)).css({display:""})}(f.offsetHeight!=n||f.offsetWidth!=
j)&&a(f).animate({height:n,marginTop:-n/2,width:j,marginLeft:-j/2},b.resizeDuration,b.resizeEasing);a(f).queue(function(c){a(k).css({width:j,marginLeft:-j/2,marginTop:n/2});a(p).css({display:"none",visibility:"",opacity:""});null!=g&&a(g).css({display:"block"}).appendTo(p);a(p).fadeIn(b.fadeDuration,na);X();A=!1;c()})}function na(){if(!b.hideBottom){if(0<=i||0<=l&&!b.noNavigation&&!b.hideButtons)a(S).css({display:""}),a([w,x]).addClass("nav"),b.hideCaption&&a([w,x]).css({display:"none"}),0<=i&&a(y).fadeIn(b.captionFadeDuration),
0<=l&&a(z).fadeIn(b.captionFadeDuration);a(k).css({opacity:""}).fadeIn(b.captionFadeDuration);a(J).css({marginTop:-J.offsetHeight}).animate({marginTop:0},b.captionFadeDuration);a(f).animate({borderBottomLeftRadius:0,borderBottomRightRadius:0},b.captionFadeDuration)}}function O(){A=!0;a(f).removeClass();null!=q&&(q=q.onload=q.onerror=null);null!=K&&(K.abort(),K=null);null!=m&&(clearTimeout(m),m=null);null!=I&&(clearTimeout(I),I=null);null!=B&&(clearTimeout(B),B=null);null!=o&&(a(Q).append(a(o).css({display:R})),
o=Q=R=null);P=v=!1;D=E=0;a(p).empty();a(f).css({borderRadius:b.cornerRadius});a(k).css({borderBottomLeftRadius:b.cornerRadius,borderBottomRightRadius:b.cornerRadius});a([f,J]).stop(!0);a([S,w,x]).css({display:"none"});a([w,x]).removeClass().html("");a([p,k,y,z]).stop(!0).css({display:"none"})}function oa(){t=!t;s=!1;a(T).toggleClass("disabled",t);t?null!=m&&(clearTimeout(m),m=null):X();return!1}function F(c){if(!(b.noClose&&1!=c))return 0<=h&&(O(),h=i=l=-1,s=t=!1,a(U).stop().fadeOut(b.fadeDuration,
W),a(f).animate({height:b.closeHeight,marginTop:-b.closeHeight/2,width:b.closeWidth,marginLeft:-b.closeWidth/2,opacity:0},b.fadeDuration,function(){V();a([f,k,y,z]).css({left:"",top:""});a(f).hide()})),!1}function Y(){F(1)}function ka(){A=!1}function Z(){return/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(d[h][0])}function $(){var a=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(d[h][0]);return null!=a?a[1]:!1}function ba(){var a=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(d[h][0]);
return null!=a?a[1]:!1}function ma(){var b=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(d[h][0]);return null!=b&&a("#"+b[2]).length?b[2]:!1}function la(){a(f).addClass("easyLoading");q=new Image;q.onload=function(){D=this.width;E=this.height;a(f).removeClass("easyLoading");u()};q.onerror=function(){v=!0;u()};q.src=d[h][0]}function aa(b,g){var e,d;a(f).addClass("easyLoading");d={type:"GET",dataType:"jsonp",timeout:2E3,error:function(b,c){"abort"!=c&&(v=!0,a(f).removeClass("easyLoading"),u())}};0==b?(e="http://gdata.youtube.com/feeds/api/videos/"+
g+"?v=2&alt=jsonc",d.success=function(b){!b.error&&b.data&&"allowed"==b.data.accessControl.embed?P="widescreen"==b.data.aspectRatio:v=!0;a(f).removeClass("easyLoading");u()}):1==b&&(e="http://vimeo.com/api/v2/video/"+g+".json",d.success=function(b){b.length&&("anywhere"==b[0].embed_privacy||"approved"==b[0].embed_privacy?(D=b[0].width||0,E=b[0].height||0):v=!0);a(f).removeClass("easyLoading");u()});K=a.ajax(e,d)}function C(a){0<a.w&&0<a.h||(a.w=b.defWidth,a.h=b.defHeight);a.h>b.maxHeight&&(a.w=Math.round(b.maxHeight*
a.w/a.h),a.h=b.maxHeight);a.w>b.maxWidth&&(a.h=Math.round(b.maxWidth/a.w*a.h),a.w=b.maxWidth);return a}function pa(c){if(b.dragDrop)return L=!0,a([f,k,y,z]).css({cursor:"pointer"}),da=c.pageX-a(this).position().left,ea=c.pageY-a(this).position().top,!1}function fa(c){if(b.dragDrop&&L){var d=c.pageX-a(window).scrollLeft()-da,c=c.pageY-a(window).scrollTop()-ea;a([f,k]).css({left:d+"px",top:c+"px"})}}function V(){L&&(L=!1,a([f,k,y,z]).css({cursor:""}))}var ga,b,d,h=-1,i,l,j,n,M=[],s=!1,t=!1,L=!1,da=
0,ea=0,A=!1,q=null,K=null,o=null,Q=null,R=null,I=null,m=null,B=null,D=0,E=0,P=0,v=!1,U,f,p,S,y,z,T,ha,k,J,w,x;a(function(){ga={loop:!1,loopVideos:!1,dynOpts:!0,dragDrop:!0,hideBottom:!1,hideCaption:!1,hideButtons:!1,noNavigation:!1,noClose:!1,overlayOpacity:0.8,cornerRadius:8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initWidth:250,initHeight:250,defWidth:960,defHeight:720,closeWidth:128,closeHeight:128,maxWidth:1280,maxHeight:720,maxScreenFill:0.7,ytPlayerHeight:480,ytPlayerTheme:"light,white",
captionFadeDuration:200,slideshow:0,autoClose:0,busyTimeout:800,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],preventOtherKeys:!0};a("body").append(a([U=a('<div id="easyOverlay" />').click(F)[0],f=a('<div id="easyCenter" />').append([p=a('<div id="easyContainer" />')[0]])[0],k=a('<div id="easyBottomContainer" />').append([J=a('<div id="easyBottom" />').append([S=a('<div id="easyNavigation" />').append([y=a('<a id="easyPrevLink" href="#" />').click(H)[0],z=a('<a id="easyNextLink" href="#" />').click(G)[0]])[0],
ha=a('<a id="easyCloseLink" href="#" />').click(F)[0],T=a('<a id="easySlideLink" href="#" />').click(oa)[0],w=a('<div id="easyCaption" />')[0],x=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"));a([f,k]).mousedown(pa).mousemove(fa).mouseup(V);a(window).mousemove(fa).mouseup(V)});a.easybox=function(c,g,e,k){if(0<=h)return!1;b=a.extend({},ga,e);b.dynOpts&&a("#easyOptions").length&&(e=a.parseJSON(a("#easyOptions").html()),a.each(e,function(c,d){if("global"==
c||"string"==typeof k&&c==k)b=a.extend(b,d)}));if("string"==typeof c)d=[[c,g||""]],g=0;else{var e=0,ca;d=[];for(ca=c.length;e<ca;++e)"string"==typeof c[e]?d.push([c[e],""]):d.push([c[e][0],c[e][1]||""]);g=g||0}b.maxScreenFill&&(b.maxWidth=Math.min(Math.round(screen.width*b.maxScreenFill),b.maxWidth),b.maxHeight=Math.min(Math.round(screen.height*b.maxScreenFill),b.maxHeight));b.loop=b.loop&&1<d.length;b.slideshow=b.slideshow&&1<d.length?b.slideshow:0;a(T).css({display:b.slideshow&&1<d.length&&!b.hideButtons?
"":"none"});a(ha).css({display:!b.hideButtons?"":"none"});j=b.initWidth;n=b.initHeight;a(f).css({width:j,height:n,marginLeft:-j/2,marginTop:-n/2,opacity:""});W(1);O();a(f).show();a(U).css("opacity",b.overlayOpacity).fadeIn(b.fadeDuration,function(){N(g)});return!1};a.easybox.close=Y;a.easybox.isOpen=function(){return 0<=h};a.fn.easybox=function(b,d,e){var d=d||function(a){return[a.href,a.title]},e=e||function(a){return this==a},f=this;return f.unbind("click").click(function(){var h=this,k=0,j,i=0,
l;j=a.grep(f,function(a,b){return e.call(h,a,b)});for(l=j.length;i<l;++i)j[i]==h&&(k=i),j[i]=d(j[i],i);return a.easybox(j,k,b,a(h).attr("rel")||null)})};a.easing.easybox=function(a){return 0.7>a?1.2*Math.pow(a/0.7,2):1.2-0.2*Math.sqrt((a-0.7)/(1-0.7))}})(jQuery);
