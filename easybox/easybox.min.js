/*
        Easybox v1.3 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
/android|iphone|ipod|series60|symbian|windows ce|blackberry|msie 6/i.test(navigator.userAgent)||jQuery(function(a){a("a.lightbox").easybox({},null,function(a){return this==a||-1!=this.className.indexOf("lightbox")&&this.hasAttribute("data-group")&&this.getAttribute("data-group")==a.getAttribute("data-group")},function(b){var c={};if(a("#easyOptions").length){var f=a.parseJSON(a("#easyOptions").html()),d=b.getAttribute("data-group");a.each(f,function(e,b){if("global"==e||"string"==typeof d&&e==d)c=
a.extend(c,b)})}return c})});
(function(a){function Q(d){d?a("object:visible").add("embed").each(function(b,a){F[b]=[a,a.style.visibility];a.style.visibility="hidden"}):(a.each(F,function(b,a){a[0].style.visibility=a[1]}),F=[]);d=d?"bind":"unbind";a(document)[d]("keydown",Z);if(a.fn.mousewheel)a(window)[d]("mousewheel",$);a(f)[d]("mousedown",aa)[d]("mousemove",R)[d]("mouseup",G);a(window)[d]("mousemove",R)[d]("mouseup",G)}function Z(d){var d=d.keyCode,b=a.inArray;return u?!0:0<=b(d,c.closeKeys)?z():0<=b(d,c.nextKeys)&&!c.noNavigation?
A():0<=b(d,c.previousKeys)&&!c.noNavigation?B():!c.preventOtherKeys}function $(a,b){return u?!0:0<b&&!c.noNavigation?B():0>b&&!c.noNavigation?A():!c.preventOtherKeys}function B(){o=!0;return H(i)}function A(){o=!1;return H(g)}function S(){if(c.slideshow&&!p&&null==k){if(o&&0<=i)return k=setTimeout(B,c.slideshow),!1;if(!o&&0<=g)return k=setTimeout(A,c.slideshow),!1}c.autoClose&&null==v&&(v=setTimeout(T,c.autoClose));return!1}function H(d){0<=d&&d<e.length&&(j=d,i=(j||(c.loop?e.length:0))-1,g=(j+1)%
e.length||(c.loop?0:-1),I(),c.busyTimeout&&(C=setTimeout(ba,c.busyTimeout)),c.preloadNext&&(0<=i&&J(i),0<=g&&J(g)),e[j].loaded||a(K).show(),J(j));return!1}function ca(){var d=e[j];a(K).hide();if(d.error)a(h).addClass("error").width(c.errorSize[0]).height(c.errorSize[1]);else{if("inline"==d.type)q=d.obj,L=a(q).parent(),M=a(q).css("display");d.caption.length&&a(w).html(d.caption).css({display:""});a(h).width(d.width).height(d.height)}1<e.length&&c.counterText.length&&a(x).html(c.counterText.replace(/{x}/,
j+1).replace(/{y}/,e.length)).css({display:""});a(h).css({visibility:"hidden",display:""});U([h.offsetWidth,h.offsetHeight],-1,c.resizeDuration);a(f).queue(function(b){a(h).css({visibility:"",display:"none"});null!=d.obj&&a(d.obj).css({display:"block"}).appendTo(h);a(h).fadeIn(c.fadeDuration,da);S();b()})}function U(d,b,c){l=d.slice();var e={};if(f.offsetHeight!=d[1]||f.offsetWidth!=d[0])e={height:d[1],marginTop:-d[1]/2,width:d[0],marginLeft:-d[0]/2};if(-1<b)e.opacity=b;a(f).animate(e,c)}function da(){u=
!1;if(!c.hideBottom){if((0<=i||0<=g)&&!c.noNavigation&&!c.hideButtons)a(N).css({display:""}),a([w,x]).addClass("nav"),0<=i&&a(r).fadeIn(c.captionFadeDuration),0<=g&&a(s).fadeIn(c.captionFadeDuration);a(y).fadeIn(c.captionFadeDuration);a(f).animate({height:l[1]+y.offsetHeight},c.captionFadeDuration,c.resizeEasing)}}function I(){u=!0;null!=k&&(clearTimeout(k),k=null);null!=C&&(clearTimeout(C),C=null);null!=v&&(clearTimeout(v),v=null);null!=q&&(a(L).append(a(q).css({display:M})),q=L=M=null);a(h).empty().removeClass();
a([f,y,h,r,s]).stop(!0);a(f).css({width:l[0],height:l[1],marginLeft:-l[0]/2,marginTop:-l[1]/2,opacity:""});a([N,w,x,h,y,r,s]).css({display:"none",opacity:""});a([w,x]).removeClass().html("").css({display:c.hideCaption?"none":""})}function ea(){p=!p;o=!1;a(O).toggleClass("disabled",p);p?null!=k&&(clearTimeout(k),k=null):S();return!1}function z(d){if(!(c.noClose&&1!=d))return 0<=j&&(I(),j=i=g=-1,a(P).stop().fadeOut(c.fadeDuration,Q),U(c.initCenterSize,0,c.fadeDuration),a(f).queue(function(b){G();a(f).css({left:"",
top:""}).hide();b()})),!1}function T(){z(1)}function ba(){u=!1}function J(d){var b=e[d];b.loaded&&n(d);if(!b.loading)if(b.loading=!0,/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(e[d].url))b.type="image",fa(d);else{var c=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(e[d].url);!1!=(id=null!=c?c[1]:!1)?(b.type="youtube",b.id=id,V(d)):(c=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(e[d].url),!1!=(id=null!=c?c[1]:!1)?(b.type="vimeo",b.id=id,V(d)):(c=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(e[d].url),
!1!=(id=null!=c&&a("#"+c[2]).length?c[2]:!1)?(b.type="inline",b.id=id,b=e[d],(c=a("#"+b.id)[0])?(b.width=b.width||a(c).width(),b.height=b.height||a(c).height(),b.obj=c):b.error=!0):b.type="iframe",n(d)))}}function n(d){var b=e[d];if(!b.loaded){b.loaded=!0;if(!b.width||!b.height)b.width=c.defaultContentSize[0],b.height=c.defaultContentSize[1];if(b.height>c.maximumContentSize[1])b.width=Math.round(c.maximumContentSize[1]*b.width/b.height),b.height=c.maximumContentSize[1];if(b.width>c.maximumContentSize[0])b.height=
Math.round(c.maximumContentSize[0]/b.width*b.height),b.width=c.maximumContentSize[0];if(!b.error)if("image"==b.type)b.obj=a('<img src="'+b.url+'" width="'+b.width+'" height="'+b.height+'" alt="'+b.caption+'" />')[0];else if("youtube"==b.type){var m="?version=3&autohide=1&autoplay=1&rel=0";if(c.ytPlayerTheme&&null!=(t=/^([a-z]*),([a-z]*)$/.exec(c.ytPlayerTheme)))m+="&theme="+t[1]+"&color="+t[2];b.obj=a('<iframe src="http://www.youtube.com/embed/'+b.id+m+'" width="'+b.width+'" height="'+b.height+'" frameborder="0"></iframe>')[0]}else if("vimeo"==
b.type)b.obj=a('<iframe src="http://player.vimeo.com/video/'+b.id+'?title=0&byline=0&portrait=0&autoplay=true" width="'+b.width+'" height="'+b.height+'" frameborder="0"></iframe>')[0];else if("iframe"==b.type)b.obj=a('<iframe width="'+b.width+'" height="'+b.height+'" src="'+b.url+'" frameborder="0"></iframe>')[0]}d==j&&ca()}function fa(a){var b=e[a],c=new Image;c.onload=function(){b.width=b.width||this.width;b.height=b.height||this.height;n(a)};c.onerror=function(){b.error=!0;n(a)};c.src=b.url}function V(d){var b=
e[d],m,f;f={type:"GET",dataType:"jsonp",timeout:2E3,error:function(a,c){if("abort"!=c)b.error=!0,n(d)}};if("youtube"==b.type)m="http://gdata.youtube.com/feeds/api/videos/"+b.id+"?v=2&alt=jsonc",f.success=function(a){!a.error&&a.data&&"allowed"==a.data.accessControl.embed?(a="widescreen"==a.data.aspectRatio,b.height=b.height||c.ytPlayerHeight,b.width=Math.round(b.height*(a?16/9:4/3))):b.error=!0;n(d)};else if("vimeo"==b.type)m="http://vimeo.com/api/v2/video/"+b.id+".json",f.success=function(a){if(a.length)if("anywhere"==
a[0].embed_privacy||"approved"==a[0].embed_privacy){if(a[0].width&&a[0].height)b.width=a[0].width,b.height=a[0].height}else b.error=!0;n(d)};a.ajax(m,f)}function aa(d){return c.dragDrop?(D=!0,a([f,r,s]).css({cursor:"pointer"}),W=d.pageX-a(this).position().left,X=d.pageY-a(this).position().top,!1):!0}function R(d){if(c.dragDrop&&D){var b=d.pageX-a(window).scrollLeft()-W,d=d.pageY-a(window).scrollTop()-X;a(f).css({left:b+"px",top:d+"px"});return!1}return!0}function G(){return D?(D=!1,a([f,r,s]).css({cursor:""}),
!1):!0}var E,c,e,j=-1,i,g,l,F=[],o=!1,p=!1,D=!1,W=0,X=0,u=!1,q=null,L=null,M=null,C=null,k=null,v=null,P,f,h,N,r,s,O,Y,y,w,x,K;a(function(){E={loop:!1,preloadNext:!0,dragDrop:!0,hideBottom:!1,hideCaption:!1,hideButtons:!1,noNavigation:!1,noClose:!1,overlayOpacity:0.8,resizeDuration:400,resizeEasing:"easybox",fadeDuration:400,initCenterSize:[250,250],errorSize:[320,180],defaultContentSize:[960,720],maximumContentSize:[1280,720],ytPlayerHeight:480,ytPlayerTheme:"light,white",captionFadeDuration:200,
slideshow:0,autoClose:0,busyTimeout:800,counterText:"{x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],preventOtherKeys:!0};a("body").append(a([P=a('<div id="easyOverlay" />').click(z)[0],f=a('<div id="easyCenter" />').append([h=a('<div id="easyContainer" />')[0],K=a('<div id="easyLoadingIndicator" />')[0],y=a('<div id="easyBottom" />').append([N=a('<div id="easyNavigation" />').append([r=a('<a id="easyPrevLink" href="#" />').click(B)[0],s=a('<a id="easyNextLink" href="#" />').click(A)[0]])[0],
Y=a('<a id="easyCloseLink" href="#" />').click(z)[0],O=a('<a id="easySlideLink" href="#" />').click(ea)[0],w=a('<div id="easyCaption" />')[0],x=a('<div id="easyNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]])[0]]).css("display","none"))});a.fn.easybox=function(c,b,e,f){var b=b||function(a){var b={url:a.href,caption:a.title};if(a.hasAttribute("data-width"))b.width=a.getAttribute("data-width");if(a.hasAttribute("data-height"))b.height=a.getAttribute("data-height");return b},e=e||function(a){return this==
a},f=f||function(){return{}},j=this;return j.unbind("click").click(function(){var h=this,k=0,i,g=0,l;i=a.grep(j,function(a,b){return e.call(h,a,b)});for(l=i.length;g<l;++g)i[g]==h&&(k=g),i[g]=b(i[g],g);return a.easybox(i,k,a.extend({},c,f(h)))})};a.easybox=function(d,b,g){if(0<=j)return!1;c=a.extend({},E,g);var g=0,h;e=[];for(h=d.length;g<h;++g)e.push(a.extend({url:"",caption:"",width:0,height:0},d[g],{type:"",loaded:!1,loading:!1,error:!1,obj:null}));b=Math.min(e.length-1,b||0);c.loop=c.loop&&1<
e.length;c.slideshow=c.slideshow&&1<e.length?c.slideshow:0;a(O).css({display:c.slideshow&&1<e.length&&!c.hideButtons?"":"none"});o=p=!1;a(Y).css({display:!c.hideButtons?"":"none"});l=c.initCenterSize.slice();Q(1);I();a(f).show();a(P).css("opacity",c.overlayOpacity).fadeIn(c.fadeDuration,function(){H(b)});return!1};a.easybox.close=T;a.easybox.isOpen=function(){return 0<=j};a.easybox.defaults=function(c){E=a.extend(E,c)};a.easing.easybox=function(a){return 0.7>a?1.2*Math.pow(a/0.7,2):1.2-0.2*Math.sqrt((a-
0.7)/(1-0.7))}})(jQuery);
